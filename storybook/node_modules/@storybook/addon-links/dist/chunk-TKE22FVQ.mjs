import{b as l}from"./chunk-DUAG4ME5.mjs";import k from"global";import{addons as f,makeDecorator as C}from"@storybook/addons";import{STORY_CHANGED as T,SELECT_STORY as h}from"@storybook/core-events";import{toId as u}from"@storybook/csf";var{document:c,HTMLElement:L}=k;function E(t){let e={},r=(t[0]==="?"?t.substring(1):t).split("&").filter(Boolean);for(let o=0;o<r.length;o++){let n=r[o].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return e}var i=t=>f.getChannel().emit(h,t),O=(t,e)=>new Promise(r=>{let{location:o}=c,n=E(o.search),s=[].concat(n.id)[0],d=t||s.split("--",2)[0],g=u(d,e),y=`${o.origin+o.pathname}?${Object.entries({...n,id:g}).map(m=>`${m[0]}=${m[1]}`).join("&")}`;r(y)}),I=t=>e=>typeof e=="function"?e(...t):e,$=(t,e)=>(...r)=>{let o=I(r),n=o(t),s=e?o(e):!1;n?.match(/--/)&&!s?i({storyId:n}):s&&n?i({kind:n,story:s}):n?i({kind:n}):s&&i({story:s})},p=t=>{let{target:e}=t;if(!(e instanceof L))return;let r=e,{sbKind:o,sbStory:n}=r.dataset;(o||n)&&(t.preventDefault(),i({kind:o,story:n}))},a=!1,b=()=>{a||(a=!0,c.addEventListener("click",p))},P=()=>{a&&(a=!1,c.removeEventListener("click",p))},A=C({name:"withLinks",parameterName:l,wrapper:(t,e)=>(b(),f.getChannel().once(T,P),t(e))});export{i as a,O as b,$ as c,A as d};
