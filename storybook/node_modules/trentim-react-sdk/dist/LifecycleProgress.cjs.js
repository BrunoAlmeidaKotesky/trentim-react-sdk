"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("react"),S=require("./IconButton.34226127.js");require("react-dom");const B=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},c=B(i),V=i.createContext({calloutIdx:null,setCallout:void 0,alwaysShowCallout:!1,showCalloutOnlyOnActive:!1}),j=({styles:e,...f})=>{const{calloutIdx:v,setCallout:C,alwaysShowCallout:b,showCalloutOnlyOnActive:I}=i.useContext(V),h=`${e.tile} ${e[`${f.position}`]} ${f.completed?e.completed:""} ${f.active?e.active:""} indicator-${f==null?void 0:f.currentIdx}`;return c.default.createElement("div",{className:h,style:{order:f.currentIdx,display:f!=null&&f.hidden?"none":"flex"}},f.completed?c.default.createElement("span",{className:e.stageIndicator},c.default.createElement(S.Icon,{styles:{root:{width:"100%"}},iconName:"CheckMark"})):c.default.createElement("span",{className:e.stageIndicator}),c.default.createElement("div",{className:e.titleArea,onClick:w=>{const{onStageClick:g,position:m,currentIdx:n,...o}=f;b&&C({isVisible:!0,calloutIdx:n}),I&&(o==null?void 0:o.active)&&C({isVisible:!0,calloutIdx:n}),g&&((o==null?void 0:o.showCallout)&&(!v||v!==n)&&C({isVisible:!0,calloutIdx:n}),g(o,n,C,w))}},c.default.createElement("span",{className:e.tileTitle,style:f.overflowStageText?{textOverflow:"ellipsis",width:100,overflow:"hidden"}:{}},f.label)))},H=j,M="_lifecycle_fyd1t_1",A="_projectLifecycle_fyd1t_18",q="_columnTitle_fyd1t_30",D="_columnSubTitle_fyd1t_33",F="_lifecycleContainer_fyd1t_37",z="_btnLifecycleScroll_fyd1t_45",G="_scrollLeft_fyd1t_58",W="_scrollRight_fyd1t_62",J="_lifecycleTrackContainer_fyd1t_66",K="_lifecycleTrack_fyd1t_66",Q="_tile_fyd1t_82",U="_start_fyd1t_95",X="_middle_fyd1t_104",Y="_end_fyd1t_122",Z="_active_fyd1t_131",p="_tileTitle_fyd1t_131",ee="_stageIndicator_fyd1t_134",te="_completed_fyd1t_147",le="_titleArea_fyd1t_195",r={lifecycle:M,projectLifecycle:A,columnTitle:q,columnSubTitle:D,lifecycleContainer:F,btnLifecycleScroll:z,scrollLeft:G,scrollRight:W,lifecycleTrackContainer:J,lifecycleTrack:K,tile:Q,start:U,middle:X,end:Y,active:Z,tileTitle:p,stageIndicator:ee,completed:te,titleArea:le};function ce(e,f){var x,P,R;const[{isVisible:v,calloutIdx:C},b]=i.useState({isVisible:!1,calloutIdx:null}),I=i.useRef(null),h=i.useRef(null),w=i.useRef(!1),[g,m]=i.useState(1),[n,o]=i.useState(e==null?void 0:e.stages.map(t=>({...t,hidden:!0}))),k=i.useMemo(()=>{const t={root:{color:"white",width:24},rootHovered:{backgroundColor:e==null?void 0:e.buttonColor,color:"white"},rootFocused:{outline:"none",color:"white"},rootPressed:{background:e.buttonColor,color:"white"}};return{left:{...t,...e==null?void 0:e.leftScrollButtonStyles},right:{...t,...e==null?void 0:e.rightScrollButtonStyles}}},[e==null?void 0:e.leftScrollButtonStyles,e==null?void 0:e.rightScrollButtonStyles]),L=()=>{var l;const t=document.documentElement;t==null||t.style.setProperty("--lifecycle-color",e.indicatorColor),t==null||t.style.setProperty("--lifecycle-button-color",e.buttonColor),t==null||t.style.setProperty("--lifecycle-left-col-color",(l=e==null?void 0:e.leftColumnColor)!=null?l:e.indicatorColor),g?t==null||t.style.setProperty("--lifecycle-grid-row-number",g.toString()):t==null||t.style.setProperty("--lifecycle-grid-row-number","3")},E=()=>{var l;const t=(l=h==null?void 0:h.current)==null?void 0:l.clientWidth;if(t>=1200)return(e==null?void 0:e.stages.length)>=4?m(4):m(e==null?void 0:e.stages.length);if(t<=992&&t>768)return(e==null?void 0:e.stages.length)>=3?m(3):m(e==null?void 0:e.stages.length);if(t<=768&&t>520)return(e==null?void 0:e.stages.length)>=2?m(2):m(e==null?void 0:e.stages.length);t<=411?m(1):m(3)},N=t=>{if(!!I.current){if(t==="right"){const l=[];for(let a=0;a<n.length;a++)n[a].hidden||l.push(a);const s=l[l.length-1],_=l[0];if(s===n.length-1)return;o(a=>a.map((u,d)=>d<_?{...u,hidden:!0}:d===_?{...u,hidden:!0}:d===s+1?{...u,hidden:!1}:u))}if(t==="left"){const l=[];for(let a=0;a<n.length;a++)n[a].hidden||l.push(a);const s=l[l.length-1],_=l[0];if(_===0)return;o(a=>a.map((u,d)=>d>s?{...u,hidden:!0}:d===s?{...u,hidden:!0}:d===_-1?{...u,hidden:!1}:u))}}},$=i.useCallback(t=>t===0?"start":t===n.length-1?"end":"middle",[n]),T=(t,l,s,_)=>a=>{const u=a.findIndex(d=>d.active);return u===-1?a.map((d,y)=>({...d,hidden:y<a.length-t})):u===0?a.map((d,y)=>({...d,hidden:y>l})):u===n.length-1?a.map((d,y)=>({...d,hidden:y<n.length-s})):a.map((d,y)=>{const O=_>=0?y<u-1||y>u+_:y<u-1||y>u;return{...d,hidden:O}})};return i.useLayoutEffect(()=>{L(),E()},[]),i.useEffect(()=>{const t=e.stages.map((l,s)=>({...l,hidden:n[s].hidden}));o(t)},[e.stages]),i.useEffect(()=>E(),[(x=h==null?void 0:h.current)==null?void 0:x.clientWidth,n.length]),i.useEffect(()=>{switch(g===1?w.current=!0:w.current=!1,g){case 1:o(t=>t.map((l,s)=>({...l,hidden:s!==0})));break;case 4:{o(T(4,3,4,2));break}case 3:{o(T(3,2,3,1));break}case 2:{o(T(2,1,2));break}}},[g]),i.useEffect(()=>L(),[g,e==null?void 0:e.indicatorColor,e==null?void 0:e.leftColumnColor]),i.useImperativeHandle(f,()=>({setCallout:b}),[]),i.useEffect(()=>(window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}),[]),c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{ref:h,className:r.lifecycle},c.default.createElement("div",{className:r.projectLifecycle},c.default.createElement("span",{className:r.columnTitle},e.leftColumnTitle),c.default.createElement("span",{className:r.columnSubTitle},e.leftColumnSubtitle)),c.default.createElement("div",{className:r.lifecycleContainer},c.default.createElement("div",{className:`${r.btnLifecycleScroll} ${r.scrollLeft}`,onClick:()=>N("left")},c.default.createElement(S.IconButton,{styles:k.left,iconProps:{iconName:"ChevronLeftMed"}})),c.default.createElement("div",{className:r.lifecycleTrackContainer},c.default.createElement("div",{ref:I,className:r.lifecycleTrack},c.default.createElement(V.Provider,{value:{calloutIdx:C,setCallout:b,alwaysShowCallout:e==null?void 0:e.alwaysShowCallout,showCalloutOnlyOnActive:e==null?void 0:e.showCalloutOnlyOnActive}},n==null?void 0:n.map((t,l)=>c.default.createElement(H,{hidden:t==null?void 0:t.hidden,styles:r,key:(t==null?void 0:t.label)+l,label:t.label,overflowStageText:w.current,currentIdx:l,data:t==null?void 0:t.data,showCallout:t==null?void 0:t.showCallout,active:t.active,completed:t==null?void 0:t.completed,position:$(l),onStageClick:e.onStageClick}))))),c.default.createElement("div",{className:`${r.btnLifecycleScroll} ${r.scrollRight}`,onClick:()=>N("right")},c.default.createElement(S.IconButton,{styles:k.right,iconProps:{iconName:"ChevronRightMed"}})))),v&&c.default.createElement(S.Callout,{role:"dialog",target:`.indicator-${C}`,setInitialFocus:!0,directionalHint:(R=(P=e==null?void 0:e.calloutProps)==null?void 0:P.directionalHint)!=null?R:S.DirectionalHint.bottomAutoEdge,onDismiss:()=>b({isVisible:!1,calloutIdx:null}),...e==null?void 0:e.calloutProps},e==null?void 0:e.calloutContent))}const ne=i.forwardRef(ce);exports.LifecycleProgress=ne;
