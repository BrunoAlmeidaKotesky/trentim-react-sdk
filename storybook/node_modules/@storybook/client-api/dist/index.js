var rr=Object.create;var _=Object.defineProperty;var tr=Object.getOwnPropertyDescriptor;var er=Object.getOwnPropertyNames;var or=Object.getPrototypeOf,ar=Object.prototype.hasOwnProperty;var sr=(t,r)=>{for(var e in r)_(t,e,{get:r[e],enumerable:!0})},k=(t,r,e,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let p of er(r))!ar.call(t,p)&&p!==e&&_(t,p,{get:()=>r[p],enumerable:!(c=tr(r,p))||c.enumerable});return t},w=(t,r,e)=>(k(t,r,"default"),e&&k(e,r,"default")),$=(t,r,e)=>(e=t!=null?rr(or(t)):{},k(r||!t||!t.__esModule?_(e,"default",{value:t,enumerable:!0}):e,t)),nr=t=>k(_({},"__esModule",{value:!0}),t);var x={};sr(x,{ClientApi:()=>j,addArgTypes:()=>B,addArgTypesEnhancer:()=>J,addArgs:()=>U,addArgsEnhancer:()=>H,addDecorator:()=>V,addLoader:()=>Q,addParameters:()=>Y,addStepRunner:()=>W,getQueryParam:()=>cr,getQueryParams:()=>Z,setGlobalRender:()=>q});module.exports=nr(x);var z=require("ts-dedent"),N=$(require("global")),M=require("@storybook/client-logger"),R=require("@storybook/csf"),A=require("@storybook/store");var v=$(require("global")),D=require("ts-dedent"),G=require("synchronous-promise"),u=require("@storybook/csf"),P=require("@storybook/store"),L=require("@storybook/client-logger"),I=class{constructor(){this.projectAnnotations={loaders:[],decorators:[],parameters:{},argsEnhancers:[],argTypesEnhancers:[],args:{},argTypes:{}},this.entries={},this.csfExports={}}importFn(r){return G.SynchronousPromise.resolve().then(()=>{let e=this.csfExports[r];if(!e)throw new Error(`Unknown path: ${r}`);return e})}getStoryIndex(r){var s,E;let e=Object.keys(this.csfExports),c=(E=(s=this.projectAnnotations.parameters)==null?void 0:s.options)==null?void 0:E.storySort,S=Object.entries(this.entries).map(([o,{type:d,importPath:m,...h}])=>{let n=this.csfExports[m],i=r.processCSFFileWithCache(n,m,n.default.title),g;return d==="story"?g=r.storyFromCSFFile({storyId:o,csfFile:i}):g={...h,story:h.name,kind:h.title,componentId:(0,u.toId)(h.componentId||h.title),parameters:{fileName:m}},[o,g,i.meta.parameters,this.projectAnnotations.parameters]}),l;try{l=(0,P.sortStoriesV6)(S,c,e)}catch(o){throw typeof c=="function"?new Error(D.dedent`
          Error sorting stories with sort parameter ${c}:

          > ${o.message}
          
          Are you using a V7-style sort function in V6 compatibility mode?
          
          More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort
        `):o}let a=l.reduce((o,d)=>(o[d.id]=this.entries[d.id],o),{});return{v:4,entries:a}}clearFilenameExports(r){!this.csfExports[r]||(Object.entries(this.entries).forEach(([e,{importPath:c}])=>{c===r&&delete this.entries[e]}),this.csfExports[r]={})}addStoriesFromExports(r,e){if(r.match(/\.mdx$/)&&!r.match(/\.stories\.mdx$/)||this.csfExports[r]===e)return;this.clearFilenameExports(r);let{default:c,__namedExportsOrder:p,...S}=e,{id:l,title:a,tags:s=[]}=c||{},E=(v.default.STORIES||[]).map(n=>({...n,importPathMatcher:new RegExp(n.importPathMatcher)}));if(a=(0,P.userOrAutoTitle)(r,E,a),!a){L.logger.info(`Unexpected default export without title in '${r}': ${JSON.stringify(e.default)}`);return}this.csfExports[r]={...e,default:{...c,title:a}};let o=S;Array.isArray(p)&&(o={},p.forEach(n=>{let i=S[n];i&&(o[n]=i)}));let d=Object.entries(o).filter(([n])=>(0,u.isExportStory)(n,c)),m=v.default.DOCS_OPTIONS||{},h=m.docsPage==="automatic"||m.docsPage&&s.includes("docsPage");if(m.enabled&&d.length&&(s.includes("mdx")||h)){let n=m.defaultName,i=(0,u.toId)(l||a,n);this.entries[i]={type:"docs",standalone:!1,id:i,title:a,name:n,importPath:r,...l&&{componentId:l},tags:[...s,"docs"],storiesImports:[]}}d.forEach(([n,i])=>{var T,b,C;let g=(0,u.storyNameFromExport)(n),F=((T=i.parameters)==null?void 0:T.__id)||(0,u.toId)(l||a,g),O=typeof i!="function"&&i.name||i.storyName||((b=i.story)==null?void 0:b.name)||g;(C=i.parameters)!=null&&C.docsOnly||(this.entries[F]={type:"story",id:F,name:O,title:a,importPath:r,...l&&{componentId:l},tags:[...i.tags||s,"story"]})})}};var y,dr={addDecorator:"Instead, use `export const decorators = [];` in your `preview.js`.",addParameters:"Instead, use `export const parameters = {};` in your `preview.js`.",addLoader:"Instead, use `export const loaders = [];` in your `preview.js`.",addArgs:"",addArgTypes:"",addArgsEnhancer:"",addArgTypesEnhancer:"",addStepRunner:"",getGlobalRender:"",setGlobalRender:""},f=t=>{var r;if((r=N.default.FEATURES)!=null&&r.storyStoreV7)throw new Error(z.dedent`You cannot use \`${t}\` with the new Story Store.

      ${dr[t]}`);if(!y)throw new Error(`Singleton client API not yet initialized, cannot call \`${t}\`.`)},V=t=>{f("addDecorator"),y.addDecorator(t)},Y=t=>{f("addParameters"),y.addParameters(t)},Q=t=>{f("addLoader"),y.addLoader(t)},U=t=>{f("addArgs"),y.addArgs(t)},B=t=>{f("addArgTypes"),y.addArgTypes(t)},H=t=>{f("addArgsEnhancer"),y.addArgsEnhancer(t)},J=t=>{f("addArgTypesEnhancer"),y.addArgTypesEnhancer(t)},W=t=>{f("addStepRunner"),y.addStepRunner(t)};var q=t=>{f("setGlobalRender"),y.facade.projectAnnotations.render=t},ir=new Set(["string","number","boolean","symbol"]),j=class{constructor({storyStore:r}={}){this.lastFileName=0;this.addDecorator=r=>{this.facade.projectAnnotations.decorators.push(r)};this.addParameters=({globals:r,globalTypes:e,...c})=>{this.facade.projectAnnotations.parameters=(0,A.combineParameters)(this.facade.projectAnnotations.parameters,c),r&&(this.facade.projectAnnotations.globals={...this.facade.projectAnnotations.globals,...r}),e&&(this.facade.projectAnnotations.globalTypes={...this.facade.projectAnnotations.globalTypes,...(0,A.normalizeInputTypes)(e)})};this.addStepRunner=r=>{this.facade.projectAnnotations.runStep=(0,A.composeStepRunners)([this.facade.projectAnnotations.runStep,r].filter(Boolean))};this.addLoader=r=>{this.facade.projectAnnotations.loaders.push(r)};this.addArgs=r=>{this.facade.projectAnnotations.args={...this.facade.projectAnnotations.args,...r}};this.addArgTypes=r=>{this.facade.projectAnnotations.argTypes={...this.facade.projectAnnotations.argTypes,...(0,A.normalizeInputTypes)(r)}};this.addArgsEnhancer=r=>{this.facade.projectAnnotations.argsEnhancers.push(r)};this.addArgTypesEnhancer=r=>{this.facade.projectAnnotations.argTypesEnhancers.push(r)};this._addedExports={};this.storiesOf=(r,e)=>{if(!r&&typeof r!="string")throw new Error("Invalid or missing kind provided for stories, should be a string");if(e||M.logger.warn(`Missing 'module' parameter for story with a kind of '${r}'. It will break your HMR`),e){let o=Object.getPrototypeOf(e);o.exports&&o.exports.default&&M.logger.error(`Illegal mix of CSF default export and storiesOf calls in a single file: ${o.i}`)}let c=e&&e.id?`${e.id}`:(this.lastFileName++).toString(),p=c,S=1;for(;this._addedExports[p];)S+=1,p=`${c}-${S}`;e&&e.hot&&e.hot.accept&&(e.hot.accept(),e.hot.dispose(()=>{this.facade.clearFilenameExports(p),delete this._addedExports[p],setTimeout(()=>{var o;this._loadAddedExports(),(o=this.onImportFnChanged)==null||o.call(this,{importFn:this.importFn.bind(this)})},0)}));let l=!1,a={kind:r.toString(),add:()=>a,addDecorator:()=>a,addLoader:()=>a,addParameters:()=>a};Object.keys(this.addons).forEach(o=>{let d=this.addons[o];a[o]=(...m)=>(d.apply(a,m),a)});let s={id:(0,R.sanitize)(r),title:r,decorators:[],loaders:[],parameters:{}};this._addedExports[p]={default:s};let E=0;return a.add=(o,d,m={})=>{if(l=!0,typeof o!="string")throw new Error(`Invalid or missing storyName provided for a "${r}" story.`);if(!d||Array.isArray(d)||ir.has(typeof d))throw new Error(`Cannot load story "${o}" in "${r}" due to invalid format. Storybook expected a function/object but received ${typeof d} instead.`);let{decorators:h,loaders:n,component:i,args:g,argTypes:F,...O}=m,T=m.__id||(0,R.toId)(r,o),b=this._addedExports[p];return b[`story${E}`]={name:o,parameters:{fileName:p,__id:T,...O},decorators:h,loaders:n,args:g,argTypes:F,component:i,render:d},E+=1,a},a.addDecorator=o=>{if(l)throw new Error(`You cannot add a decorator after the first story for a kind.
Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories`);return s.decorators.push(o),a},a.addLoader=o=>{if(l)throw new Error("You cannot add a loader after the first story for a kind.");return s.loaders.push(o),a},a.addParameters=({component:o,args:d,argTypes:m,tags:h,...n})=>{if(l)throw new Error(`You cannot add parameters after the first story for a kind.
Read more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories`);return s.parameters=(0,A.combineParameters)(s.parameters,n),o&&(s.component=o),d&&(s.args={...s.args,...d}),m&&(s.argTypes={...s.argTypes,...m}),h&&(s.tags=h),a},a};this.raw=()=>this.storyStore.raw();this.facade=new I,this.addons={},this.storyStore=r,y=this}importFn(r){return this.facade.importFn(r)}getStoryIndex(){if(!this.storyStore)throw new Error("Cannot get story index before setting storyStore");return this.facade.getStoryIndex(this.storyStore)}_loadAddedExports(){Object.entries(this._addedExports).forEach(([r,e])=>this.facade.addStoriesFromExports(r,e))}get _storyStore(){return this.storyStore}};w(x,require("@storybook/store"),module.exports);var K=$(require("global")),X=require("qs"),Z=()=>{let{document:t}=K.default;return t&&t.location&&t.location.search?(0,X.parse)(t.location.search,{ignoreQueryPrefix:!0}):{}},cr=t=>Z()[t];0&&(module.exports={ClientApi,addArgTypes,addArgTypesEnhancer,addArgs,addArgsEnhancer,addDecorator,addLoader,addParameters,addStepRunner,getQueryParam,getQueryParams,setGlobalRender});
