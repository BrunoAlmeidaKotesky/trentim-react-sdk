"use strict";var Fe=Object.create;var H=Object.defineProperty;var he=Object.getOwnPropertyDescriptor;var Ae=Object.getOwnPropertyNames;var Te=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty;var we=(e,r)=>{for(var t in r)H(e,t,{get:r[t],enumerable:!0})},kr=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Ae(r))!be.call(e,s)&&s!==t&&H(e,s,{get:()=>r[s],enumerable:!(o=he(r,s))||o.enumerable});return e};var f=(e,r,t)=>(t=e!=null?Fe(Te(e)):{},kr(r||!e||!e.__esModule?H(t,"default",{value:e,enumerable:!0}):t,e)),xe=e=>kr(H({},"__esModule",{value:!0}),e);var Ye={};we(Ye,{DEEPLY_EQUAL:()=>b,HooksContext:()=>y.HooksContext,NO_TARGET_NAME:()=>G,StoryStore:()=>or,applyHooks:()=>y.applyHooks,combineArgs:()=>R,combineParameters:()=>g,composeConfigs:()=>gr,composeStepRunners:()=>ur,composeStories:()=>De,composeStory:()=>Ge,decorateStory:()=>Mr,deepDiff:()=>k,defaultDecorateStory:()=>pr,filterArgTypes:()=>rr,getArrayField:()=>v,getField:()=>E,getObjectField:()=>W,getSingletonField:()=>er,getValuesFromArgTypes:()=>C,groupArgsByTarget:()=>Y,inferControls:()=>V,mapArgsToTypes:()=>lr,noTargetArgs:()=>ke,normalizeComponentAnnotations:()=>M,normalizeInputType:()=>jr,normalizeInputTypes:()=>w,normalizeProjectAnnotations:()=>L,normalizeStory:()=>D,prepareStory:()=>$,processCSFFile:()=>cr,sanitizeStoryContextUpdate:()=>$r,setProjectAnnotations:()=>Re,sortStoriesV6:()=>Je,sortStoriesV7:()=>Ue,useAddonState:()=>Ve,useArgs:()=>y.useArgs,useCallback:()=>y.useCallback,useChannel:()=>y.useChannel,useEffect:()=>y.useEffect,useGlobals:()=>y.useGlobals,useMemo:()=>y.useMemo,useParameter:()=>y.useParameter,useReducer:()=>y.useReducer,useRef:()=>y.useRef,useSharedState:()=>te,useState:()=>y.useState,useStoryContext:()=>y.useStoryContext,userOrAutoTitle:()=>He,userOrAutoTitleFromSpecifier:()=>ie,validateOptions:()=>mr});module.exports=xe(Ye);var Fr=f(require("memoizerific")),re=f(require("lodash/mapValues")),hr=f(require("lodash/pick")),tr=require("synchronous-promise"),ee=require("@storybook/addons");var Cr=require("ts-dedent"),Pr=f(require("memoizerific")),_e=(0,Pr.default)(1)(e=>Object.values(e).reduce((r,t)=>(r[t.importPath]=r[t.importPath]||t,r),{})),U=class{constructor({entries:r}={v:4,entries:{}}){this.entries=r}entryFromSpecifier(r){let t=Object.values(this.entries);if(r==="*")return t[0];if(typeof r=="string")return this.entries[r]?this.entries[r]:t.find(n=>n.id.startsWith(r));let{name:o,title:s}=r;return t.find(n=>n.name===o&&n.title===s)}storyIdToEntry(r){let t=this.entries[r];if(!t)throw new Error(Cr.dedent`Couldn't find story matching '${r}' after HMR.
      - Did you remove it from your CSF file?
      - Are you sure a story with that id exists?
      - Please check your entries field of your main.js config.
      - Also check the browser console and terminal for error messages.`);return t}importPathToEntry(r){return _e(this.entries)[r]}};var Ir=require("dequal"),J=require("@storybook/client-logger"),B=f(require("lodash/isPlainObject")),ir=require("ts-dedent"),I=Symbol("incompatible"),ar=(e,r)=>{let t=r.type;if(e==null||!t||r.mapping)return e;switch(t.name){case"string":return String(e);case"enum":return e;case"number":return Number(e);case"boolean":return e==="true";case"array":return!t.value||!Array.isArray(e)?I:e.reduce((o,s,n)=>{let i=ar(s,{type:t.value});return i!==I&&(o[n]=i),o},new Array(e.length));case"object":return typeof e=="string"||typeof e=="number"?e:!t.value||typeof e!="object"?I:Object.entries(e).reduce((o,[s,n])=>{let i=ar(n,{type:t.value[s]});return i===I?o:Object.assign(o,{[s]:i})},{});default:return I}},lr=(e,r)=>Object.entries(e).reduce((t,[o,s])=>{if(!r[o])return t;let n=ar(s,r[o]);return n===I?t:Object.assign(t,{[o]:n})},{}),R=(e,r)=>Array.isArray(e)&&Array.isArray(r)?r.reduce((t,o,s)=>(t[s]=R(e[s],r[s]),t),[...e]).filter(t=>t!==void 0):!(0,B.default)(e)||!(0,B.default)(r)?r:Object.keys({...e,...r}).reduce((t,o)=>{if(o in r){let s=R(e[o],r[o]);s!==void 0&&(t[o]=s)}else t[o]=e[o];return t},{}),mr=(e,r)=>Object.entries(r).reduce((t,[o,{options:s}])=>{function n(){return o in e&&(t[o]=e[o]),t}if(!s)return n();if(!Array.isArray(s))return J.once.error(ir.dedent`
        Invalid argType: '${o}.options' should be an array.

        More info: https://storybook.js.org/docs/react/api/argtypes
      `),n();if(s.some(c=>c&&["object","function"].includes(typeof c)))return J.once.error(ir.dedent`
        Invalid argType: '${o}.options' should only contain primitives. Use a 'mapping' for complex values.

        More info: https://storybook.js.org/docs/react/writing-stories/args#mapping-to-complex-arg-values
      `),n();let i=Array.isArray(e[o]),l=i&&e[o].findIndex(c=>!s.includes(c)),a=i&&l===-1;if(e[o]===void 0||s.includes(e[o])||a)return n();let m=i?`${o}[${l}]`:o,d=s.map(c=>typeof c=="string"?`'${c}'`:String(c)).join(", ");return J.once.warn(`Received illegal value for '${m}'. Supported options: ${d}`),t},{}),b=Symbol("Deeply equal"),k=(e,r)=>{if(typeof e!=typeof r)return r;if((0,Ir.dequal)(e,r))return b;if(Array.isArray(e)&&Array.isArray(r)){let t=r.reduce((o,s,n)=>{let i=k(e[n],s);return i!==b&&(o[n]=i),o},new Array(r.length));return r.length>=e.length?t:t.concat(new Array(e.length-r.length).fill(void 0))}return(0,B.default)(e)&&(0,B.default)(r)?Object.keys({...e,...r}).reduce((t,o)=>{let s=k(e==null?void 0:e[o],r==null?void 0:r[o]);return s===b?t:Object.assign(t,{[o]:s})},{}):r},G="";function Y({args:e,argTypes:r}){let t={};return Object.entries(e).forEach(([o,s])=>{let{target:n=G}=r[o]||{};t[n]=t[n]||{},t[n][o]=s}),t}function ke(e){return Y(e)[G]}function Ce(e){return Object.keys(e).forEach(r=>e[r]===void 0&&delete e[r]),e}var q=class{constructor(){this.initialArgsByStoryId={};this.argsByStoryId={}}get(r){if(!(r in this.argsByStoryId))throw new Error(`No args known for ${r} -- has it been rendered yet?`);return this.argsByStoryId[r]}setInitial(r){if(!this.initialArgsByStoryId[r.id])this.initialArgsByStoryId[r.id]=r.initialArgs,this.argsByStoryId[r.id]=r.initialArgs;else if(this.initialArgsByStoryId[r.id]!==r.initialArgs){let t=k(this.initialArgsByStoryId[r.id],this.argsByStoryId[r.id]);this.initialArgsByStoryId[r.id]=r.initialArgs,this.argsByStoryId[r.id]=r.initialArgs,t!==b&&this.updateFromDelta(r,t)}}updateFromDelta(r,t){let o=mr(t,r.argTypes);this.argsByStoryId[r.id]=R(this.argsByStoryId[r.id],o)}updateFromPersisted(r,t){let o=lr(t,r.argTypes);return this.updateFromDelta(r,o)}update(r,t){if(!(r in this.argsByStoryId))throw new Error(`No args known for ${r} -- has it been rendered yet?`);this.argsByStoryId[r]=Ce({...this.argsByStoryId[r],...t})}};var Er=require("@storybook/client-logger");var C=(e={})=>Object.entries(e).reduce((r,[t,{defaultValue:o}])=>(typeof o<"u"&&(r[t]=o),r),{});var K=class{constructor({globals:r={},globalTypes:t={}}){this.set({globals:r,globalTypes:t})}set({globals:r={},globalTypes:t={}}){let o=this.initialGlobals&&k(this.initialGlobals,this.globals);this.allowedGlobalNames=new Set([...Object.keys(r),...Object.keys(t)]);let s=C(t);this.initialGlobals={...s,...r},this.globals=this.initialGlobals,o&&o!==b&&this.updateFromPersisted(o)}filterAllowedGlobals(r){return Object.entries(r).reduce((t,[o,s])=>(this.allowedGlobalNames.has(o)?t[o]=s:Er.logger.warn(`Attempted to set a global (${o}) that is not defined in initial globals or globalTypes`),t),{})}updateFromPersisted(r){let t=this.filterAllowedGlobals(r);this.globals={...this.globals,...t}}get(){return this.globals}update(r){this.globals={...this.globals,...this.filterAllowedGlobals(r)}}};var Or=f(require("lodash/mapValues")),Pe=e=>typeof e=="string"?{name:e}:e,Ie=e=>typeof e=="string"?{type:e}:e,jr=(e,r)=>{let{type:t,control:o,...s}=e,n={name:r,...s};return t&&(n.type=Pe(t)),o?n.control=Ie(o):o===!1&&(n.control={disable:!0}),n},w=e=>(0,Or.default)(e,jr);var Q=require("@storybook/csf"),zr=require("ts-dedent"),Nr=require("@storybook/client-logger"),Br=f(require("util-deprecate"));var Ee=zr.dedent`
CSF .story annotations deprecated; annotate story functions directly:
- StoryFn.story.name => StoryFn.storyName
- StoryFn.story.(parameters|decorators) => StoryFn.(parameters|decorators)
See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations for details and codemod.
`,Oe=(0,Br.default)(()=>{},Ee);function D(e,r,t){let o=r,s=typeof r=="function"?r:null,{story:n}=o;n&&(Nr.logger.debug("deprecated story",n),Oe());let i=(0,Q.storyNameFromExport)(e),l=typeof o!="function"&&o.name||o.storyName||(n==null?void 0:n.name)||i,a=[...o.decorators||[],...(n==null?void 0:n.decorators)||[]],m={...n==null?void 0:n.parameters,...o.parameters},d={...n==null?void 0:n.args,...o.args},c={...n==null?void 0:n.argTypes,...o.argTypes},u=[...o.loaders||[],...(n==null?void 0:n.loaders)||[]],{render:F,play:P,tags:_=[]}=o,sr=m.__id||(0,Q.toId)(t.id,i);return{moduleExport:r,id:sr,name:l,tags:_,decorators:a,parameters:m,args:d,argTypes:w(c),loaders:u,...F&&{render:F},...s&&{userStoryFn:s},...P&&{play:P}}}var Dr=require("@storybook/csf"),yr=require("@storybook/client-logger");var Rr=require("@storybook/csf");function M(e,r=e.title,t){let{id:o,argTypes:s}=e;return{id:(0,Rr.sanitize)(o||r),...e,title:r,...s&&{argTypes:w(s)},parameters:{fileName:t,...e.parameters}}}var je=e=>{let{globals:r,globalTypes:t}=e;(r||t)&&yr.logger.error("Global args/argTypes can only be set globally",JSON.stringify({globals:r,globalTypes:t}))},ze=e=>{let{options:r}=e;r!=null&&r.storySort&&yr.logger.error("The storySort option parameter can only be set globally")},Gr=e=>{!e||(je(e),ze(e))};function cr(e,r,t){let{default:o,__namedExportsOrder:s,...n}=e,i=M(o,t,r);Gr(i.parameters);let l={meta:i,stories:{}};return Object.keys(n).forEach(a=>{if((0,Dr.isExportStory)(a,i)){let m=D(a,n[a],i);Gr(m.parameters),l.stories[m.id]=m}}),l}var Vr=require("ts-dedent"),Lr=f(require("util-deprecate")),dr=f(require("global")),vr=require("@storybook/csf"),Wr=require("@storybook/addons");var Z=f(require("lodash/isPlainObject")),g=(...e)=>{let r={},t=e.filter(Boolean),o=t.reduce((s,n)=>(Object.entries(n).forEach(([i,l])=>{let a=s[i];Array.isArray(l)||typeof a>"u"?s[i]=l:(0,Z.default)(l)&&(0,Z.default)(a)?r[i]=!0:typeof l<"u"&&(s[i]=l)}),s),{});return Object.keys(r).forEach(s=>{let n=t.filter(Boolean).map(i=>i[s]).filter(i=>typeof i<"u");n.every(i=>(0,Z.default)(i))?o[s]=g(...n):o[s]=n[n.length-1]}),o};function Mr(e,r,t){let o=t(e);return s=>r(o,s)}function $r({componentId:e,title:r,kind:t,id:o,name:s,story:n,parameters:i,initialArgs:l,argTypes:a,...m}={}){return m}function pr(e,r){let t={},o=n=>i=>{if(!t.value)throw new Error("Decorated function called without init");return t.value={...t.value,...$r(i)},n(t.value)},s=r.reduce((n,i)=>Mr(n,i,o),e);return n=>(t.value=n,s(n))}var Ne=(0,Lr.default)(()=>{},Vr.dedent`
  \`argType.defaultValue\` is deprecated and will be removed in Storybook 7.0.

  https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#no-longer-inferring-default-values-of-args`);function $(e,r,t){var xr;let{moduleExport:o,id:s,name:n}=e,{title:i}=r,l=[...e.tags||r.tags||[],"story"],a=g(t.parameters,r.parameters,e.parameters),m=[...e.decorators||[],...r.decorators||[],...t.decorators||[]],{applyDecorators:d=pr,argTypesEnhancers:c=[],argsEnhancers:u=[],runStep:F}=t,P=[...t.loaders||[],...r.loaders||[],...e.loaders||[]],_=e.userStoryFn||e.render||r.render||t.render;if(!_)throw new Error(`No render function available for storyId '${s}'`);let sr=g(t.argTypes,r.argTypes,e.argTypes),{passArgsFirst:pe=!0}=a;a.__isArgsStory=pe&&_.length>0;let Ar={...t.args,...r.args,...e.args},h={componentId:r.id,title:i,kind:i,id:s,name:n,story:n,component:r.component,subcomponents:r.subcomponents,tags:l,parameters:a,initialArgs:Ar,argTypes:sr};h.argTypes=c.reduce((p,S)=>S({...h,argTypes:p}),h.argTypes);let Tr=C(h.argTypes);Object.keys(Tr).length>0&&Ne();let de={...Tr,...Ar};h.initialArgs=u.reduce((p,S)=>({...p,...S({...h,initialArgs:p})}),de),(xr=dr.default.FEATURES)!=null&&xr.breakingChangesV7||(h.parameters={...h.parameters,__id:s,globals:t.globals,globalTypes:t.globalTypes,args:h.initialArgs,argTypes:h.argTypes});let Se=async p=>{let S=await Promise.all(P.map(A=>A(p))),T=Object.assign({},...S);return{...p,loaded:T}},br=p=>{let S=Object.entries(p.args).reduce((O,[j,z])=>{var _r;let N=(_r=p.argTypes[j])==null?void 0:_r.mapping;return O[j]=N&&z in N?N[z]:z,O},{}),T=Object.entries(S).reduce((O,[j,z])=>{let N=p.argTypes[j]||{};return(0,vr.includeConditionalArg)(N,S,p.globals)&&(O[j]=z),O},{}),A={...p,args:T},{passArgsFirst:ge=!0}=p.parameters;return ge?_(A.args,A):_(A)},fe=(0,Wr.applyHooks)(d)(br,m),ue=p=>{var T;let S=p;if((T=dr.default.FEATURES)!=null&&T.argTypeTargetsV7){let A=Y(p);S={...p,allArgs:p.args,argsByTarget:A,args:A[G]||{}}}return fe(S)},{play:wr}=e;return Object.freeze({...h,moduleExport:o,originalStoryFn:_,undecoratedStoryFn:br,unboundStoryFn:ue,applyLoaders:Se,playFunction:wr&&(async p=>{let S={...p,step:(T,A)=>F(T,A,S)};return wr(S)})})}var X=f(require("lodash/mapValues")),Hr=require("ts-dedent"),Ur=require("@storybook/client-logger");var Sr=(e,r,t)=>{let o=typeof e;switch(o){case"boolean":case"string":case"number":case"function":case"symbol":return{name:o};default:break}if(e){if(t.has(e))return Ur.logger.warn(Hr.dedent`
        We've detected a cycle in arg '${r}'. Args should be JSON-serializable.

        Consider using the mapping feature or fully custom args:
        - Mapping: https://storybook.js.org/docs/react/writing-stories/args#mapping-to-complex-arg-values
        - Custom args: https://storybook.js.org/docs/react/essentials/controls#fully-custom-args
      `),{name:"other",value:"cyclic object"};if(t.add(e),Array.isArray(e)){let n=e.length>0?Sr(e[0],r,new Set(t)):{name:"other",value:"unknown"};return{name:"array",value:n}}let s=(0,X.default)(e,n=>Sr(n,r,new Set(t)));return{name:"object",value:s}}return{name:"object",value:{}}},fr=e=>{let{id:r,argTypes:t={},initialArgs:o={}}=e,s=(0,X.default)(o,(i,l)=>({name:l,type:Sr(i,`${r}.${l}`,new Set)})),n=(0,X.default)(t,(i,l)=>({name:l}));return g(s,n,t)};fr.secondPass=!0;var qr=f(require("lodash/mapValues")),Kr=require("@storybook/client-logger");var Yr=f(require("lodash/pickBy")),Jr=(e,r)=>Array.isArray(r)?r.includes(e):e.match(r),rr=(e,r,t)=>!r&&!t?e:e&&(0,Yr.default)(e,(o,s)=>{let n=o.name||s;return(!r||Jr(n,r))&&(!t||!Jr(n,t))});var Be=(e,r,t)=>{let{type:o,options:s}=e;if(!!o){if(t.color&&t.color.test(r)){let n=o.name;if(n==="string")return{control:{type:"color"}};n!=="enum"&&Kr.logger.warn(`Addon controls: Control of type color only supports string, received "${n}" instead`)}if(t.date&&t.date.test(r))return{control:{type:"date"}};switch(o.name){case"array":return{control:{type:"object"}};case"boolean":return{control:{type:"boolean"}};case"string":return{control:{type:"text"}};case"number":return{control:{type:"number"}};case"enum":{let{value:n}=o;return{control:{type:(n==null?void 0:n.length)<=5?"radio":"select"},options:n}}case"function":case"symbol":return null;default:return{control:{type:s?"select":"object"}}}}},V=e=>{let{argTypes:r,parameters:{__isArgsStory:t,controls:{include:o=null,exclude:s=null,matchers:n={}}={}}}=e;if(!t)return r;let i=rr(r,o,s),l=(0,qr.default)(i,(a,m)=>(a==null?void 0:a.type)&&Be(a,m,n));return g(l,i)};V.secondPass=!0;function L({argTypes:e,globalTypes:r,argTypesEnhancers:t,...o}){return{...e&&{argTypes:w(e)},...r&&{globalTypes:w(r)},argTypesEnhancers:[...t||[],fr,V],...o}}function ur(e){return async(r,t,o)=>{await e.reduceRight((n,i)=>async()=>i(r,n,o),async()=>t(o))()}}function E(e,r){return e.map(t=>t[r]).filter(Boolean)}function v(e,r){return E(e,r).reduce((t,o)=>[...t,...o],[])}function W(e,r){return Object.assign({},...E(e,r))}function er(e,r){return E(e,r).pop()}function gr(e){let r=v(e,"argTypesEnhancers"),t=E(e,"runStep");return{parameters:g(...E(e,"parameters")),decorators:v(e,"decorators"),args:W(e,"args"),argsEnhancers:v(e,"argsEnhancers"),argTypes:W(e,"argTypes"),argTypesEnhancers:[...r.filter(o=>!o.secondPass),...r.filter(o=>o.secondPass)],globals:W(e,"globals"),globalTypes:W(e,"globalTypes"),loaders:v(e,"loaders"),render:er(e,"render"),renderToDOM:er(e,"renderToDOM"),applyDecorators:er(e,"applyDecorators"),runStep:ur(t)}}var Qr=require("@storybook/csf"),Zr=require("@storybook/addons");var Xr={};function Re(e){let r=Array.isArray(e)?e:[e];Xr=gr(r)}function Ge(e,r,t=Xr,o={},s){var u;if(e===void 0)throw new Error("Expected a story but received undefined.");r.title=r.title??"ComposedStory";let n=M(r),i=s||e.storyName||((u=e.story)==null?void 0:u.name)||e.name||"unknown",l=D(i,e,n),a=L({...t,...o}),m=$(l,n,a),d=C(t.globalTypes),c=F=>{let P={...m,hooks:new Zr.HooksContext,globals:d,args:{...m.initialArgs,...F}};return m.unboundStoryFn(P)};return c.storyName=i,c.args=m.initialArgs,c.play=m.playFunction,c.parameters=m.parameters,c}function De(e,r,t){let{default:o,__esModule:s,__namedExportsOrder:n,...i}=e;return Object.entries(i).reduce((a,[m,d])=>(0,Qr.isExportStory)(m,o)?Object.assign(a,{[m]:t(d,o,r,m)}):a,{})}var Me=1e3,$e=1e4,or=class{constructor(){this.getStoriesJsonData=()=>{let{storyIndex:r}=this;if(!r)throw new Error("getStoriesJsonData called before initialization");let t=this.getSetStoriesPayload(),o=["fileName","docsOnly","framework","__id","__isArgsStory"],s=(0,re.default)(t.stories,n=>{let{importPath:i}=r.entries[n.id];return{...(0,hr.default)(n,["id","name","title"]),importPath:i,kind:n.title,story:n.name,parameters:{...(0,hr.default)(n.parameters,o),fileName:i}}});return{v:3,stories:s}};this.args=new q,this.hooks={},this.processCSFFileWithCache=(0,Fr.default)(Me)(cr),this.prepareStoryWithCache=(0,Fr.default)($e)($),this.initializationPromise=new tr.SynchronousPromise(r=>{this.resolveInitializationPromise=r})}setProjectAnnotations(r){this.projectAnnotations=L(r);let{globals:t,globalTypes:o}=r;this.globals?this.globals.set({globals:t,globalTypes:o}):this.globals=new K({globals:t,globalTypes:o})}initialize({storyIndex:r,importFn:t,cache:o=!1}){return this.storyIndex=new U(r),this.importFn=t,this.resolveInitializationPromise(),o?this.cacheAllCSFFiles():tr.SynchronousPromise.resolve()}async onStoriesChanged({importFn:r,storyIndex:t}){await this.initializationPromise,r&&(this.importFn=r),t&&(this.storyIndex.entries=t.entries),this.cachedCSFFiles&&await this.cacheAllCSFFiles()}async storyIdToEntry(r){return await this.initializationPromise,this.storyIndex.storyIdToEntry(r)}loadCSFFileByStoryId(r){if(!this.storyIndex||!this.importFn)throw new Error("loadCSFFileByStoryId called before initialization");let{importPath:t,title:o}=this.storyIndex.storyIdToEntry(r);return this.importFn(t).then(s=>this.processCSFFileWithCache(s,t,o))}loadAllCSFFiles(){if(!this.storyIndex)throw new Error("loadAllCSFFiles called before initialization");let r={};Object.entries(this.storyIndex.entries).forEach(([o,{importPath:s}])=>{r[s]=o});let t=Object.entries(r).map(([o,s])=>this.loadCSFFileByStoryId(s).then(n=>({importPath:o,csfFile:n})));return tr.SynchronousPromise.all(t).then(o=>o.reduce((s,{importPath:n,csfFile:i})=>(s[n]=i,s),{}))}cacheAllCSFFiles(){return this.initializationPromise.then(()=>this.loadAllCSFFiles().then(r=>{this.cachedCSFFiles=r}))}async loadStory({storyId:r}){await this.initializationPromise;let t=await this.loadCSFFileByStoryId(r);return this.storyFromCSFFile({storyId:r,csfFile:t})}storyFromCSFFile({storyId:r,csfFile:t}){if(!this.projectAnnotations)throw new Error("storyFromCSFFile called before initialization");let o=t.stories[r];if(!o)throw new Error(`Didn't find '${r}' in CSF file, this is unexpected`);let s=t.meta,n=this.prepareStoryWithCache(o,s,this.projectAnnotations);return this.args.setInitial(n),this.hooks[n.id]=this.hooks[n.id]||new ee.HooksContext,n}componentStoriesFromCSFFile({csfFile:r}){if(!this.storyIndex)throw new Error("componentStoriesFromCSFFile called before initialization");return Object.keys(this.storyIndex.entries).filter(t=>!!r.stories[t]).map(t=>this.storyFromCSFFile({storyId:t,csfFile:r}))}async loadEntry(r){let t=await this.storyIdToEntry(r),{importFn:o,storyIndex:s}=this;if(!s||!o)throw new Error("loadEntry called before initialization");let n=t.type==="docs"?t.storiesImports:[],[i,...l]=await Promise.all([o(t.importPath),...n.map(a=>{let m=s.importPathToEntry(a);return this.loadCSFFileByStoryId(m.id)})]);return{entryExports:i,csfFiles:l}}getStoryContext(r){if(!this.globals)throw new Error("getStoryContext called before initialization");return{...r,args:this.args.get(r.id),globals:this.globals.get(),hooks:this.hooks[r.id]}}cleanupStory(r){this.hooks[r.id].clean()}extract(r={includeDocsOnly:!1}){if(!this.storyIndex)throw new Error("extract called before initialization");let{cachedCSFFiles:t}=this;if(!t)throw new Error("Cannot call extract() unless you call cacheAllCSFFiles() first.");return Object.entries(this.storyIndex.entries).reduce((o,[s,{type:n,importPath:i}])=>{if(n==="docs")return o;let l=t[i],a=this.storyFromCSFFile({storyId:s,csfFile:l});return!r.includeDocsOnly&&a.parameters.docsOnly||(o[s]=Object.entries(a).reduce((m,[d,c])=>d==="moduleExport"||typeof c=="function"?m:Array.isArray(c)?Object.assign(m,{[d]:c.slice().sort()}):Object.assign(m,{[d]:c}),{args:a.initialArgs})),o},{})}getSetStoriesPayload(){if(!this.globals)throw new Error("getSetStoriesPayload called before initialization");let r=this.extract({includeDocsOnly:!0}),t=Object.values(r).reduce((o,{title:s})=>(o[s]={},o),{});return{v:2,globals:this.globals.get(),globalParameters:{},kindParameters:t,stories:r}}getSetIndexPayload(){if(!this.storyIndex)throw new Error("getSetIndexPayload called before initialization");let r=this.extract({includeDocsOnly:!0});return{v:4,entries:Object.fromEntries(Object.entries(this.storyIndex.entries).map(([t,o])=>[t,r[t]?{...o,args:r[t].initialArgs,initialArgs:r[t].initialArgs,argTypes:r[t].argTypes,parameters:r[t].parameters}:o]))}}raw(){return Object.values(this.extract()).map(({id:r})=>this.fromId(r)).filter(Boolean)}fromId(r){if(!this.storyIndex)throw new Error("fromId called before initialization");if(!this.cachedCSFFiles)throw new Error("Cannot call fromId/raw() unless you call cacheAllCSFFiles() first.");let t;try{({importPath:t}=this.storyIndex.storyIdToEntry(r))}catch{return null}let o=this.cachedCSFFiles[t],s=this.storyFromCSFFile({storyId:r,csfFile:o});return{...s,storyFn:n=>{let i={...this.getStoryContext(s),viewMode:"story"};return s.unboundStoryFn({...i,...n})}}}};var x=require("@storybook/core-events"),y=require("@storybook/addons");function te(e,r){let t=y.addons.getChannel(),[o]=t.last(`${x.SHARED_STATE_CHANGED}-manager-${e}`)||t.last(`${x.SHARED_STATE_SET}-manager-${e}`)||[],[s,n]=(0,y.useState)(o||r),i=(0,y.useMemo)(()=>({[`${x.SHARED_STATE_CHANGED}-manager-${e}`]:a=>n(a),[`${x.SHARED_STATE_SET}-manager-${e}`]:a=>n(a)}),[e]),l=(0,y.useChannel)(i,[e]);return(0,y.useEffect)(()=>{r!==void 0&&!o&&l(`${x.SHARED_STATE_SET}-client-${e}`,r)},[e]),[s,a=>{n(a),l(`${x.SHARED_STATE_CHANGED}-client-${e}`,a)}]}function Ve(e,r){return te(e,r)}var nr=f(require("slash")),ne=require("ts-dedent"),se=require("@storybook/client-logger"),Le=e=>{let r=[...e],t=r[r.length-1],o=t.indexOf("."),s=o>0?t.substr(0,o):t;r[r.length-1]=s;let[n,...i]=r;return n===""&&(r=i),r},ve=/^index$/i,We=e=>{let r;return e.filter((t,o)=>o===e.length-1&&(t===r||ve.test(t))?!1:(r=t,!0))};function oe(e){let r=new RegExp("/{1,}","g");return e.join("/").replace(r,"/")}var ie=(e,r,t)=>{let{directory:o,importPathMatcher:s,titlePrefix:n=""}=r||{};typeof e=="number"&&se.once.warn(ne.dedent`
      CSF Auto-title received a numeric fileName. This typically happens when
      webpack is mis-configured in production mode. To force webpack to produce
      filenames, set optimization.moduleIds = "named" in your webpack config.
    `);let i=(0,nr.default)(String(e));if(s.exec(i)){if(!t){let l=i.replace(o,""),m=(0,nr.default)(oe([n,l])).split("/");return m=Le(m),m=We(m),m.join("/")}return n?(0,nr.default)(oe([n,t])):t}},He=(e,r,t)=>{for(let o=0;o<r.length;o+=1){let s=ie(e,r[o],t);if(s)return s}return t||void 0};var ye=require("ts-dedent");var ae=/\s*\/\s*/,le=(e={})=>(r,t)=>{if(r.title===t.title&&!e.includeNames)return 0;let o=e.method||"configure",s=e.order||[],n=r.title.trim().split(ae),i=t.title.trim().split(ae);e.includeNames&&(n.push(r.name),i.push(t.name));let l=0;for(;n[l]||i[l];){if(!n[l])return-1;if(!i[l])return 1;let a=n[l],m=i[l];if(a!==m){let c=s.indexOf(a),u=s.indexOf(m),F=s.indexOf("*");return c!==-1||u!==-1?(c===-1&&(F!==-1?c=F:c=s.length),u===-1&&(F!==-1?u=F:u=s.length),c-u):o==="configure"?0:a.localeCompare(m,e.locales?e.locales:void 0,{numeric:!0,sensitivity:"accent"})}let d=s.indexOf(a);d===-1&&(d=s.indexOf("*")),s=d!==-1&&Array.isArray(s[d+1])?s[d+1]:[],l+=1}return 0};var ce=(e,r,t)=>{if(r){let o;typeof r=="function"?o=r:o=le(r),e.sort(o)}else e.sort((o,s)=>t.indexOf(o.importPath)-t.indexOf(s.importPath));return e},Ue=(e,r,t)=>{try{return ce(e,r,t)}catch(o){throw new Error(ye.dedent`
    Error sorting stories with sort parameter ${r}:

    > ${o.message}
    
    Are you using a V6-style sort function in V7 mode?

    More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort
  `)}},me=e=>{let{id:r,title:t,name:o,parameters:s,type:n}=e;return{id:r,title:t,name:o,importPath:s.fileName,type:n}},Je=(e,r,t)=>{if(r&&typeof r=="function")return e.sort(r),e.map(s=>me(s[1]));let o=e.map(s=>me(s[1]));return ce(o,r,t)};0&&(module.exports={DEEPLY_EQUAL,HooksContext,NO_TARGET_NAME,StoryStore,applyHooks,combineArgs,combineParameters,composeConfigs,composeStepRunners,composeStories,composeStory,decorateStory,deepDiff,defaultDecorateStory,filterArgTypes,getArrayField,getField,getObjectField,getSingletonField,getValuesFromArgTypes,groupArgsByTarget,inferControls,mapArgsToTypes,noTargetArgs,normalizeComponentAnnotations,normalizeInputType,normalizeInputTypes,normalizeProjectAnnotations,normalizeStory,prepareStory,processCSFFile,sanitizeStoryContextUpdate,setProjectAnnotations,sortStoriesV6,sortStoriesV7,useAddonState,useArgs,useCallback,useChannel,useEffect,useGlobals,useMemo,useParameter,useReducer,useRef,useSharedState,useState,useStoryContext,userOrAutoTitle,userOrAutoTitleFromSpecifier,validateOptions});
