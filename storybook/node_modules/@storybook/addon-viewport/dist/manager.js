var N=Object.create;var V=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var E=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of O(t))!R.call(e,n)&&n!==i&&V(e,n,{get:()=>t[n],enumerable:!(r=C(t,n))||r.enumerable});return e};var u=(e,t,i)=>(i=e!=null?N(M(e)):{},E(t||!e||!e.__esModule?V(i,"default",{value:e,enumerable:!0}):i,e));var L=u(require("react")),w=require("@storybook/addons");var s="storybook/viewport",S="viewport",J=`${s}/update`,Q=`${s}/configure`,Z=`${s}/setStoryDefaultViewport`,K=`${s}/viewportChanged`;var o=u(require("react")),b=u(require("memoizerific")),d=require("@storybook/theming"),l=require("@storybook/components"),c=require("@storybook/api");var I=(e,t)=>e.indexOf(t),B=(e,t)=>{let i=I(e,t);return i===e.length-1?e[0]:e[i+1]},_=(e,t)=>{let i=I(e,t);return i<1?e[e.length-1]:e[i-1]},P=async(e,t,i)=>{await e.setAddonShortcut(s,{label:"Previous viewport",defaultShortcut:["shift","V"],actionName:"previous",action:()=>{let{selected:r,isRotated:n}=e.getAddonState(s);t({selected:_(i,r),isRotated:n})}}),await e.setAddonShortcut(s,{label:"Next viewport",defaultShortcut:["V"],actionName:"next",action:()=>{let{selected:r,isRotated:n}=e.getAddonState(s);t({selected:B(i,r),isRotated:n})}}),await e.setAddonShortcut(s,{label:"Reset viewport",defaultShortcut:["alt","V"],actionName:"reset",action:()=>{let{isRotated:r}=e.getAddonState(s);t({selected:"reset",isRotated:r})}})};var A={mobile1:{name:"Small mobile",styles:{height:"568px",width:"320px"},type:"mobile"},mobile2:{name:"Large mobile",styles:{height:"896px",width:"414px"},type:"mobile"},tablet:{name:"Tablet",styles:{height:"1112px",width:"834px"},type:"tablet"}};var W=(0,b.default)(50)(e=>[...$,...Object.entries(e).map(([t,{name:i,...r}])=>({...r,id:t,title:i}))]),m={id:"reset",title:"Reset viewport",styles:null,type:"other"},$=[m],z=(0,b.default)(50)((e,t,i,r,n)=>e.map(p=>{switch(p.id){case m.id:if(t.id===p.id)return null;default:return{...p,onClick:()=>{i({...r,selected:p.id}),n()}}}}).filter(Boolean)),F="storybook-preview-iframe",j="storybook-preview-wrapper",G=({width:e,height:t,...i})=>({...i,height:e,width:t}),X=d.styled.div(()=>({display:"inline-flex"})),k=d.styled.div(({theme:e})=>({display:"inline-block",textDecoration:"none",padding:10,fontWeight:e.typography.weight.bold,fontSize:e.typography.size.s2-1,lineHeight:"1",height:40,border:"none",borderTop:"3px solid transparent",borderBottom:"3px solid transparent",background:"transparent"})),U=(0,d.styled)(l.IconButton)(()=>({display:"inline-flex",alignItems:"center"})),H=d.styled.div(({theme:e})=>({fontSize:e.typography.size.s2-1,marginLeft:10})),Y=(e,t,i)=>{if(t===null)return null;let r=typeof t=="function"?t(e):t;return i?G(r):r},v=(0,o.memo)((0,d.withTheme)(({theme:e})=>{let{viewports:t=A,defaultViewport:i=m.id,disable:r}=(0,c.useParameter)(S,{}),[n,p]=(0,c.useAddonState)(s,{selected:i,isRotated:!1}),x=W(t),T=(0,c.useStorybookApi)();x.find(a=>a.id===i)||console.warn(`Cannot find "defaultViewport" of "${i}" in addon-viewport configs, please check the "viewports" setting in the configuration.`),(0,o.useEffect)(()=>{P(T,p,Object.keys(t))},[t]),(0,o.useEffect)(()=>{p({selected:i||(t[n.selected]?n.selected:m.id),isRotated:n.isRotated})},[i]);let{selected:D,isRotated:g}=n,y=x.find(a=>a.id===D)||x.find(a=>a.id===i)||x.find(a=>a.default)||m,f=(0,o.useRef)(),h=Y(f.current,y.styles,g);return(0,o.useEffect)(()=>{f.current=h},[y]),r||Object.entries(t).length===0?null:o.default.createElement(o.Fragment,null,o.default.createElement(l.WithTooltip,{placement:"top",trigger:"click",tooltip:({onHide:a})=>o.default.createElement(l.TooltipLinkList,{links:z(x,y,p,n,a)}),closeOnClick:!0},o.default.createElement(U,{key:"viewport",title:"Change the size of the preview",active:!!h,onDoubleClick:()=>{p({...n,selected:m.id})}},o.default.createElement(l.Icons,{icon:"grow"}),h?o.default.createElement(H,null,g?`${y.title} (L)`:`${y.title} (P)`):null)),h?o.default.createElement(X,null,o.default.createElement(d.Global,{styles:{[`#${F}`]:{margin:"auto",transition:"width .3s, height .3s",position:"relative",border:"1px solid black",boxShadow:"0 0 100px 100vw rgba(0,0,0,0.5)",...h},[`#${j}`]:{padding:e.layoutMargin,alignContent:"center",alignItems:"center",justifyContent:"center",justifyItems:"center",overflow:"auto",display:"grid",gridTemplateColumns:"100%",gridTemplateRows:"100%"}}}),o.default.createElement(k,{title:"Viewport width"},h.width.replace("px","")),o.default.createElement(l.IconButton,{key:"viewport-rotate",title:"Rotate viewport",onClick:()=>{p({...n,isRotated:!g})}},o.default.createElement(l.Icons,{icon:"transfer"})),o.default.createElement(k,{title:"Viewport height"},h.height.replace("px",""))):null)}));w.addons.register(s,()=>{w.addons.add(s,{title:"viewport / media-queries",type:w.types.TOOL,match:({viewMode:e})=>e==="story",render:()=>L.createElement(v,null)})});
