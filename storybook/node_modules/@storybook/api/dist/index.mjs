import{a as _,g as ht,h as At}from"./chunk-KW732PML.mjs";import k,{Component as bo,Fragment as _o,useCallback as qt,useContext as Pt,useEffect as vo,useMemo as mt,useRef as Qt}from"react";import Eo from"lodash/mergeWith";import{STORY_CHANGED as xo,SHARED_STATE_CHANGED as Bt,SHARED_STATE_SET as H,SET_STORIES as Ro}from"@storybook/core-events";import{createContext as Wt}from"react";var It=({api:t,state:e})=>Wt({api:t,state:e});import D from"store2";import{parse as zt,stringify as Xt}from"telejson";var bt=t=>{t.fn("set",function(e,r){return t.set(this._area,this._in(e),Xt(r,{maxDepth:50}))}),t.fn("get",function(e,r){let a=t.get(this._area,this._in(e));return a!==null?zt(a):r||a})};bt(D._);var _t="@storybook/manager/store";function Y(t){return t.get(_t)||{}}function Jt(t,e){return t.set(_t,e)}function Zt(t,e){let r=Y(t);return Jt(t,{...r,...e})}var M=class{constructor({setState:e,getState:r}){this.upstreamSetState=e,this.upstreamGetState=r}getInitialState(e){return{...e,...Y(D.local),...Y(D.session)}}getState(){return this.upstreamGetState()}async setState(e,r,a){let l,d;typeof r=="function"?(l=r,d=a):d=r;let{persistence:c="none"}=d||{},n={},u={};typeof e=="function"?n=o=>(u=e(o),u):(n=e,u=n);let s=await new Promise(o=>{this.upstreamSetState(n,o)});if(c!=="none"){let o=c==="session"?D.session:D.local;await Zt(o,u)}return l&&l(s),s}};import te from"lodash/mergeWith";import ee from"lodash/isEqual";import{logger as oe}from"@storybook/client-logger";var v=(t,e)=>te({},t,e,(r,a)=>{if(Array.isArray(a)&&Array.isArray(r))return a.forEach(l=>{r.find(c=>c===l||ee(c,l))||r.push(l)}),r;if(Array.isArray(r))return oe.log(["the types mismatch, picking",r]),r});var re=(...t)=>t.reduce((e,r)=>v(e,r),{}),G=re;var W={};_(W,{init:()=>ne});var ne=({provider:t,fullAPI:e})=>({api:t.renderPreview?{renderPreview:t.renderPreview}:{},state:{},init:()=>{t.handleAPI(e)}});var X={};_(X,{ensurePanel:()=>z,init:()=>ae});import{Addon_TypesEnum as se}from"@storybook/types";function z(t,e,r){let a=Object.keys(t);return a.indexOf(e)>=0?e:a.length?a[0]:r}var ae=({provider:t,store:e,fullAPI:r})=>{let a={getElements:l=>t.getElements(l),getPanels:()=>a.getElements(se.PANEL),getStoryPanels:()=>{let l=a.getPanels(),{storyId:d}=e.getState(),c=r.getData(d);if(!l||!c||c.type!=="story")return l;let{parameters:n}=c,u={};return Object.entries(l).forEach(([s,o])=>{let{paramKey:i}=o;i&&n&&n[i]&&n[i].disable||(u[s]=o)}),u},getSelectedPanel:()=>{let{selectedPanel:l}=e.getState();return z(a.getPanels(),l,l)},setSelectedPanel:l=>{e.setState({selectedPanel:l},{persistence:"session"})},setAddonState(l,d,c){let n,{addons:u}=e.getState();return typeof d=="function"?n=d(a.getAddonState(l)):n=d,e.setState({addons:{...u,[l]:n}},c).then(()=>a.getAddonState(l))},getAddonState:l=>e.getState().addons[l]};return{api:a,state:{selectedPanel:z(a.getPanels(),e.getState().selectedPanel),addons:{}}}};var J={};_(J,{init:()=>ue});import{STORIES_COLLAPSE_ALL as ie,STORIES_EXPAND_ALL as ce}from"@storybook/core-events";var ue=({provider:t})=>{let e={getChannel:()=>t.channel,on:(r,a)=>(t.channel.addListener(r,a),()=>t.channel.removeListener(r,a)),off:(r,a)=>t.channel.removeListener(r,a),once:(r,a)=>t.channel.once(r,a),emit:(r,a,...l)=>{a?.options?.target&&a.options.target!=="storybook-preview-iframe"&&!a.options.target.startsWith("storybook-ref-")&&(a.options.target=a.options.target!=="storybook_internal"?`storybook-ref-${a.options.target}`:"storybook-preview-iframe"),t.channel.emit(r,a,...l)},collapseAll:()=>{t.channel.emit(ie,{})},expandAll:()=>{e.emit(ce)}};return{api:e,state:{}}};var Z={};_(Z,{init:()=>le});var le=({store:t})=>{let e={addNotification:a=>{e.clearNotification(a.id);let{notifications:l}=t.getState();t.setState({notifications:[...l,a]})},clearNotification:a=>{let{notifications:l}=t.getState();t.setState({notifications:l.filter(c=>c.id!==a)});let d=l.find(c=>c.id===a);d&&d.onClear&&d.onClear()}};return{api:e,state:{notifications:[]}}};var tt={};_(tt,{init:()=>de});var de=({store:t,navigate:e,fullAPI:r})=>{let a=()=>{let{path:d}=r.getUrlState();return!!(d||"").match(/^\/settings/)};return{state:{settings:{lastTrackedStoryId:null}},api:{closeSettings:()=>{let{settings:{lastTrackedStoryId:d}}=t.getState();d?r.selectStory(d):r.selectFirstStory()},changeSettingsTab:d=>{e(`/settings/${d}`)},isSettingsScreenActive:a,navigateToSettingsPage:async d=>{if(!a()){let{settings:c,storyId:n}=t.getState();await t.setState({settings:{...c,lastTrackedStoryId:n}})}e(d)}}}};var et={};_(et,{init:()=>ge});import pe from"global";import Se from"memoizerific";var{RELEASE_NOTES_DATA:ye}=pe,fe=Se(1)(()=>{try{return{...JSON.parse(ye)||{}}}catch{return{}}}),ge=({store:t})=>{let e=fe(),r=()=>{let{releaseNotesViewed:l}=t.getState();return l||[]};return{state:{releaseNotesViewed:[]},api:{releaseNotesVersion:()=>e.currentVersion,setDidViewReleaseNotes:()=>{let l=r();l.includes(e.currentVersion)||t.setState({releaseNotesViewed:[...l,e.currentVersion]},{persistence:"permanent"})},showReleaseNotesOnLaunch:()=>{if(!e.currentVersion)return!1;let d=r().includes(e.currentVersion);return e.showOnFirstLaunch&&!d}}}};var at={};_(at,{init:()=>Ye});import we from"global";import{toId as V,sanitize as Lt}from"@storybook/csf";import{PRELOAD_ENTRIES as Oe,STORY_PREPARED as ke,UPDATE_STORY_ARGS as De,RESET_STORY_ARGS as Me,STORY_ARGS_UPDATED as Le,STORY_CHANGED as Ne,SELECT_STORY as Fe,SET_STORIES as je,SET_INDEX as He,STORY_SPECIFIED as Ge,STORY_INDEX_INVALIDATED as Ve,CONFIG_ERROR as Ue}from"@storybook/core-events";import{logger as $e}from"@storybook/client-logger";import{logger as Te}from"@storybook/client-logger";var nt={};_(nt,{defaultStoryMapper:()=>Mt,getSourceType:()=>rt,init:()=>Ce});import Dt from"global";import{dedent as ve}from"ts-dedent";import vt from"memoizerific";import{dedent as me}from"ts-dedent";import Pe from"lodash/countBy";import{sanitize as he}from"@storybook/csf";import Ae from"lodash/mapValues";var Ie=/\s*\/\s*/,Et=({globalParameters:t,kindParameters:e,stories:r})=>Ae(r,a=>({...a,parameters:wt(t,e[a.kind],a.parameters)})),xt=(t,{provider:e,docsOptions:r})=>L(be(t),{provider:e,docsOptions:r}),be=t=>{let e=Object.entries(t).reduce((r,[a,l])=>{if(!l)return r;let{docsOnly:d,fileName:c,...n}=l.parameters,u={title:l.kind,id:a,name:l.name,importPath:c};if(d)r[a]={type:"docs",storiesImports:[],...u};else{let{argTypes:s,args:o,initialArgs:i}=l;r[a]={type:"story",...u,parameters:n,argTypes:s,args:o,initialArgs:i}}return r},{});return{v:4,entries:e}},_e=t=>{let e=Pe(Object.values(t.stories),"title");return{v:4,entries:Object.values(t.stories).reduce((r,a)=>{let l="story";return(a.parameters?.docsOnly||a.name==="Page"&&e[a.title]===1)&&(l="docs"),r[a.id]={type:l,...l==="docs"&&{storiesImports:[]},...a},r},{})}},L=(t,{provider:e,docsOptions:r})=>{if(!t.v)throw new Error("Composition: Missing stories.json version");let a=t.v===4?t:_e(t),l=Object.values(a.entries),{sidebar:d={}}=e.getConfig(),{showRoots:c,collapsedRoots:n=[],renderLabel:u}=d,s=typeof c<"u",o=Object.values(l).reduce((p,y)=>{if(r.docsMode&&y.type!=="docs")return p;let{title:f}=y,g=f.trim().split(Ie),m=(!s||c)&&g.length>1?[g.shift()]:[],b=[...m,...g],A=b.reduce((P,I,C)=>{let Q=C>0&&P[C-1],B=he(Q?`${Q}-${I}`:I);if(Q===B)throw new Error(me`
          Invalid part '${I}', leading to id === parentId ('${B}'), inside title '${f}'
          
          Did you create a path that uses the separator char accidentally, such as 'Vue <docs/>' where '/' is a separator char? See https://github.com/storybookjs/storybook/issues/6128
          `);return P.push(B),P},[]);return A.forEach((P,I)=>{let C=A[I+1]||y.id;m.length&&I===0?p[P]=v(p[P]||{},{type:"root",id:P,name:b[I],depth:I,renderLabel:u,startCollapsed:n.includes(P),children:[C],isRoot:!0,isComponent:!1,isLeaf:!1}):(!p[P]||p[P].type==="component")&&I===A.length-1?p[P]=v(p[P]||{},{type:"component",id:P,name:b[I],parent:A[I-1],depth:I,renderLabel:u,...C&&{children:[C]},isRoot:!1,isComponent:!0,isLeaf:!1}):p[P]=v(p[P]||{},{type:"group",id:P,name:b[I],parent:A[I-1],depth:I,renderLabel:u,...C&&{children:[C]},isRoot:!1,isComponent:!1,isLeaf:!1})}),p[y.id]={type:"story",...y,depth:A.length,parent:A[A.length-1],renderLabel:u,...y.type!=="docs"&&{prepared:!!y.parameters},kind:y.title,isRoot:!1,isComponent:!1,isLeaf:!0},p},{});function i(p,y){return p[y.id]||(p[y.id]=y,(y.type==="root"||y.type==="group"||y.type==="component")&&y.children.forEach(f=>i(p,o[f]))),p}let S=Object.values(o).filter(p=>p.type!=="root"&&!p.parent).reduce(i,{});return Object.values(o).filter(p=>p.type==="root").reduce(i,S)},Rt=(t,e)=>e?Object.fromEntries(Object.entries(t).map(([r,a])=>{let l=e[r];return a.type==="story"&&l?.type==="story"&&l.prepared?[r,{...l,...a,prepared:!0}]:[r,a]})):t,Ct=vt(1)(t=>Object.entries(t).reduce((e,r)=>{let a=r[1];return a.type==="component"&&e.push([...a.children]),e},[])),Tt=vt(1)(t=>Object.keys(t).filter(e=>["story","docs"].includes(t[e].type)));var{location:Ee,fetch:Ot}=Dt,kt=/(\/((?:[^\/]+?)\.[^\/]+?)|\/)$/,rt=(t,e)=>{let{origin:r,pathname:a}=Ee,{origin:l,pathname:d}=new URL(t),c=`${r+a}`.replace(kt,""),n=`${l+d}`.replace(kt,"");return c===n?["local",n]:e||t?["external",n]:[null,null]},Mt=(t,e)=>({...e,kind:e.kind.replace("|","/")}),xe=(t,e)=>Object.entries(t).reduce((r,[a,l])=>({...r,[a]:{...l,refId:e.id}}),{});async function ot(t){if(!t)return{};try{let e=await t;if(!e.ok)return{};let r=await e.json();return r.entries||r.stories?{storyIndex:r}:r}catch(e){return{error:e}}}var Re=(t,e,r)=>{let{storyMapper:a}=r;return a?Object.entries(t).reduce((l,[d,c])=>({...l,[d]:a(e,c)}),{}):t},Ce=({store:t,provider:e,singleStory:r,docsOptions:a={}},{runCheck:l=!0}={})=>{let d={findRef:u=>{let s=d.getRefs();return Object.values(s).find(({url:o})=>o.match(u))},changeRefVersion:(u,s)=>{let{versions:o,title:i}=d.getRefs()[u],S={id:u,url:s,versions:o,title:i,stories:{}};d.checkRef(S)},changeRefState:(u,s)=>{let{[u]:o,...i}=d.getRefs();i[u]={...o,ready:s},t.setState({refs:i})},checkRef:async u=>{let{id:s,url:o,version:i,type:S}=u,p=S==="server-checked",y={},f=i?`?version=${i}`:"",g=p?"omit":"include",[m,b]=await Promise.all(["index.json","stories.json"].map(async P=>Ot(`${o}/${P}${f}`,{headers:{Accept:"application/json"},credentials:g})));if(m.ok||b.ok){let[P,I]=await Promise.all([m.ok?ot(m):ot(b),ot(Ot(`${o}/metadata.json${f}`,{headers:{Accept:"application/json"},credentials:g,cache:"no-cache"}).catch(()=>!1))]);Object.assign(y,{...P,...I})}else p||(y.error={message:ve`
            Error: Loading of ref failed
              at fetch (lib/api/src/modules/refs.ts)

            URL: ${o}

            We weren't able to load the above URL,
            it's possible a CORS error happened.

            Please check your dev-tools network tab.
          `});let A=u.versions&&Object.keys(u.versions).length?u.versions:y.versions;await d.setRef(s,{id:s,url:o,...y,...A?{versions:A}:{},type:y.storyIndex?"lazy":"auto-inject"})},getRefs:()=>{let{refs:u={}}=t.getState();return u},setRef:(u,{storyIndex:s,setStoriesData:o,...i},S=!1)=>{if(r)return;let{storyMapper:p=Mt}=e.getConfig(),y=d.getRefs()[u],f;o?f=xt(Re(o,y,{storyMapper:p}),{provider:e,docsOptions:a}):s&&(f=L(s,{provider:e,docsOptions:a})),f&&(f=xe(f,y)),d.updateRef(u,{stories:f,...i,ready:S})},updateRef:(u,s)=>{let{[u]:o,...i}=d.getRefs();i[u]={...o,...s};let S=Object.keys(n).reduce((p,y)=>(p[y]=i[y],p),{});t.setState({refs:S})}},c=!r&&Dt.REFS||{},n=c;return l&&Object.entries(c).forEach(([u,s])=>{d.checkRef({...s,stories:{}})}),{api:d,state:{refs:n}}};var E=(t,e)=>{let{source:r,refId:a,type:l}=t,[d,c]=rt(r,a),n=a&&e.getRefs()[a]?e.getRefs()[a]:e.findRef(c),u={source:r,sourceType:d,sourceLocation:c,refId:a,ref:n,type:l};switch(!0){case typeof a=="string":case d==="local":case d==="external":return u;default:return Te.warn(`Received a ${l} frame that was not configured as a ref`),null}};var{FEATURES:Ke,fetch:qe}=we,Qe="./index.json",Be=["enableShortcuts","theme","showRoots"];function st(t){if(!t||typeof t=="string")return t;let e={...t};return Be.forEach(r=>{r in e&&delete e[r]}),e}var Ye=({fullAPI:t,store:e,navigate:r,provider:a,storyId:l,viewMode:d,docsOptions:c={}})=>{let n={storyId:V,getData:(s,o)=>{let i=n.resolveStory(s,o);if(i?.type==="story"||i?.type==="docs")return i},isPrepared:(s,o)=>{let i=n.getData(s,o);return i.type==="story"?i.prepared:!0},resolveStory:(s,o)=>{let{refs:i,storiesHash:S}=e.getState();return o?i[o].stories?i[o].stories[s]:void 0:S?S[s]:void 0},getCurrentStoryData:()=>{let{storyId:s,refId:o}=e.getState();return n.getData(s,o)},getParameters:(s,o)=>{let{storyId:i,refId:S}=typeof s=="string"?{storyId:s,refId:void 0}:s,p=n.getData(i,S);if(p?.type==="story"){let{parameters:y}=p;if(y)return o?y[o]:y}return null},getCurrentParameter:s=>{let{storyId:o,refId:i}=e.getState();return n.getParameters({storyId:o,refId:i},s)||void 0},jumpToComponent:s=>{let{storiesHash:o,storyId:i,refs:S,refId:p}=e.getState();if(!n.getData(i,p))return;let f=p?S[p].stories||{}:o,g=n.findSiblingStoryId(i,f,s,!0);g&&n.selectStory(g,void 0,{ref:p})},jumpToStory:s=>{let{storiesHash:o,storyId:i,refs:S,refId:p}=e.getState(),y=n.getData(i,p);if(!y)return;let f=y.refId?S[y.refId].stories:o,g=n.findSiblingStoryId(i,f,s,!1);g&&n.selectStory(g,void 0,{ref:p})},selectFirstStory:()=>{let{storiesHash:s}=e.getState(),o=Object.keys(s).find(i=>s[i].type==="story");if(o){n.selectStory(o);return}r("/")},selectStory:(s=void 0,o=void 0,i={})=>{let{ref:S}=i,{storyId:p,storiesHash:y,refs:f}=e.getState(),g=S?f[S].stories:y,m=p?.split("--",2)[0];if(o)if(s){let b=S?`${S}_${V(s,o)}`:V(s,o);if(g[b])n.selectStory(b,void 0,i);else{let A=g[Lt(s)];if(A?.type==="component"){let P=A.children.find(I=>g[I].name===o);P&&n.selectStory(P,void 0,i)}}}else{let b=V(m,o);n.selectStory(b,void 0,i)}else{let b=s?g[s]||g[Lt(s)]:g[m];if(!b)throw new Error(`Unknown id or title: '${s}'`);let A=n.findLeafEntry(g,b.id),P=A.refId?`${A.refId}_${A.id}`:A.id;r(`/${A.type}/${P}`)}},findLeafEntry(s,o){let i=s[o];if(i.type==="docs"||i.type==="story")return i;let S=i.children[0];return n.findLeafEntry(s,S)},findLeafStoryId(s,o){return n.findLeafEntry(s,o)?.id},findSiblingStoryId(s,o,i,S){if(S){let f=Ct(o),g=f.findIndex(m=>m.includes(s));return g===f.length-1&&i>0||g===0&&i<0?void 0:f[g+i]?f[g+i][0]:void 0}let p=Tt(o),y=p.indexOf(s);if(!(y===p.length-1&&i>0)&&!(y===0&&i<0))return p[y+i]},updateStoryArgs:(s,o)=>{let{id:i,refId:S}=s;t.emit(De,{storyId:i,updatedArgs:o,options:{target:S}})},resetStoryArgs:(s,o)=>{let{id:i,refId:S}=s;t.emit(Me,{storyId:i,argNames:o,options:{target:S}})},fetchIndex:async()=>{try{let s=await qe(Qe);if(s.status!==200)throw new Error(await s.text());let o=await s.json();if(o.v<3){$e.warn(`Skipping story index with version v${o.v}, awaiting SET_STORIES.`);return}await t.setIndex(o)}catch(s){e.setState({storiesConfigured:!0,storiesFailed:s})}},setIndex:async s=>{let o=L(s,{provider:a,docsOptions:c}),i=e.getState().storiesHash;await e.setState({storiesHash:Rt(o,i),storiesConfigured:!0,storiesFailed:null})},updateStory:async(s,o,i)=>{if(i){let{id:S,stories:p}=i;p[s]={...p[s],...o},await t.updateRef(S,{stories:p})}else{let{storiesHash:S}=e.getState();S[s]={...S[s],...o},await e.setState({storiesHash:S})}}};return{api:n,state:{storiesHash:{},storyId:l,viewMode:d,storiesConfigured:!1,hasCalledSetOptions:!1},init:async()=>{t.on(Ge,function({storyId:o,viewMode:i}){let{sourceType:S}=E(this,t);if(!t.isSettingsScreenActive()&&S==="local"){let p=e.getState();(p.storyId!==o||p.viewMode!==i)&&r(`/${i}/${o}`)}}),t.on(Ne,function(){let{sourceType:o}=E(this,t);if(o==="local"){let i=t.getCurrentParameter("options");i&&t.setOptions(st(i))}}),t.on(ke,function({id:o,...i}){let{ref:S,sourceType:p}=E(this,t);if(t.updateStory(o,{...i,prepared:!0},S),S)t.updateRef(S.id,{ready:!0});else if(!e.getState().hasCalledSetOptions){let{options:y}=i.parameters;t.setOptions(st(y)),e.setState({hasCalledSetOptions:!0})}if(p==="local"){let{storyId:y,storiesHash:f,refId:g}=e.getState(),m=Array.from(new Set([n.findSiblingStoryId(y,f,1,!0),n.findSiblingStoryId(y,f,-1,!0)])).filter(Boolean);t.emit(Oe,{ids:m,options:{target:g}})}}),t.on(He,function(o){let{ref:i}=E(this,t);if(i)t.setRef(i.id,{...i,storyIndex:o},!0);else{t.setIndex(o);let S=t.getCurrentParameter("options");t.setOptions(st(S))}}),t.on(je,function(o){let{ref:i}=E(this,t),S=o.v?Et(o):o.stories;if(i)t.setRef(i.id,{...i,setStoriesData:S},!0);else throw new Error("Cannot call SET_STORIES for local frame")}),t.on(Fe,function({kind:o,story:i,storyId:S,...p}){let{ref:y}=E(this,t);y?t.selectStory(S||o,i,{...p,ref:y.id}):t.selectStory(S||o,i,p)}),t.on(Le,function({storyId:o,args:i}){let{ref:S}=E(this,t);t.updateStory(o,{args:i},S)}),t.on(Ue,function(o){e.setState({storiesConfigured:!0,storiesFailed:o})}),Ke?.storyStoreV7&&(a.serverChannel?.on(Ve,()=>t.fetchIndex()),await t.fetchIndex())}}};var $={};_($,{ActiveTabs:()=>Nt,focusableUIElements:()=>F,init:()=>Ze});import We from"global";import N from"lodash/pick";import{dequal as U}from"dequal";import{create as ze}from"@storybook/theming/create";import{SET_CONFIG as Xe}from"@storybook/core-events";var{document:Je}=We,Nt={SIDEBAR:"sidebar",CANVAS:"canvas",ADDONS:"addons"},w={ui:{enableShortcuts:!0},layout:{initialActive:Nt.CANVAS,showToolbar:!0,isFullscreen:!1,showPanel:!0,showNav:!0,panelPosition:"bottom",showTabs:!0},selectedPanel:void 0,theme:ze()},F={storySearchField:"storybook-explorer-searchfield",storyListMenu:"storybook-explorer-menu",storyPanelRoot:"storybook-panel-root"},Ze=({store:t,provider:e,singleStory:r,fullAPI:a})=>{let l={toggleFullscreen(c){return t.setState(n=>{let{showNav:u}=n.layout,s=typeof c=="boolean"?c:!n.layout.isFullscreen,o=u===!1&&s===!1;return{layout:{...n.layout,isFullscreen:s,showNav:!r&&o?!0:u}}},{persistence:"session"})},togglePanel(c){return t.setState(n=>{let{showNav:u,isFullscreen:s}=n.layout,o=typeof c<"u"?c:!n.layout.showPanel,i=u===!1&&o===!1;return{layout:{...n.layout,showPanel:o,isFullscreen:i?!0:s}}},{persistence:"session"})},togglePanelPosition(c){return typeof c<"u"?t.setState(n=>({layout:{...n.layout,panelPosition:c}}),{persistence:"permanent"}):t.setState(n=>({layout:{...n.layout,panelPosition:n.layout.panelPosition==="right"?"bottom":"right"}}),{persistence:"permanent"})},toggleNav(c){return t.setState(n=>{if(r)return{layout:n.layout};let{showPanel:u,isFullscreen:s}=n.layout,o=typeof c<"u"?c:!n.layout.showNav,i=u===!1&&o===!1;return{layout:{...n.layout,showNav:o,isFullscreen:i?!0:!o&&s}}},{persistence:"session"})},toggleToolbar(c){return t.setState(n=>{let u=typeof c<"u"?c:!n.layout.showToolbar;return{layout:{...n.layout,showToolbar:u}}},{persistence:"session"})},resetLayout(){return t.setState(c=>({layout:{...c.layout,showNav:!1,showPanel:!1,isFullscreen:!1}}),{persistence:"session"})},focusOnUIElement(c,n){if(!c)return;let u=Je.getElementById(c);u&&(u.focus(),n&&u.select())},getInitialOptions(){let{theme:c,selectedPanel:n,...u}=e.getConfig();return{...w,layout:{...w.layout,...N(u,Object.keys(w.layout)),...r&&{showNav:!1}},ui:{...w.ui,...N(u,Object.keys(w.ui))},selectedPanel:n||w.selectedPanel,theme:c||w.theme}},setOptions:c=>{let{layout:n,ui:u,selectedPanel:s,theme:o}=t.getState();if(c){let i={...n,...N(c,Object.keys(n)),...r&&{showNav:!1}},S={...u,...N(c,Object.keys(u))},p={...o,...c.theme},y={};U(u,S)||(y.ui=S),U(n,i)||(y.layout=i),c.selectedPanel&&!U(s,c.selectedPanel)&&(y.selectedPanel=c.selectedPanel),Object.keys(y).length&&t.setState(y,{persistence:"permanent"}),U(o,p)||t.setState({theme:p})}}},d=N(t.getState(),"layout","ui","selectedPanel");return{api:l,state:v(l.getInitialOptions(),d),init:()=>{l.setOptions(v(l.getInitialOptions(),d)),a.on(Xe,()=>{l.setOptions(v(l.getInitialOptions(),d))})}}};var lt={};_(lt,{controlOrMetaKey:()=>K,defaultShortcuts:()=>O,init:()=>ro,isMacLike:()=>jt,keys:()=>ut});import to from"global";import{PREVIEW_KEYDOWN as eo}from"@storybook/core-events";var{navigator:it,document:Ft}=to,jt=()=>it&&it.platform?!!it.platform.match(/(Mac|iPhone|iPod|iPad)/i):!1,K=()=>jt()?"meta":"control";function ut(t){return Object.keys(t)}var O=Object.freeze({fullScreen:["F"],togglePanel:["A"],panelPosition:["D"],toggleNav:["S"],toolbar:["T"],search:["/"],focusNav:["1"],focusIframe:["2"],focusPanel:["3"],prevComponent:["alt","ArrowUp"],nextComponent:["alt","ArrowDown"],prevStory:["alt","ArrowLeft"],nextStory:["alt","ArrowRight"],shortcutsPage:[K(),"shift",","],aboutPage:[","],escape:["escape"],collapseAll:[K(),"shift","ArrowUp"],expandAll:[K(),"shift","ArrowDown"]}),ct={};function oo(t){let e=t.target;return/input|textarea/i.test(e.tagName)||e.getAttribute("contenteditable")!==null}var ro=({store:t,fullAPI:e})=>{let r={getShortcutKeys(){return t.getState().shortcuts},getDefaultShortcuts(){return{...O,...r.getAddonsShortcutDefaults()}},getAddonsShortcuts(){return ct},getAddonsShortcutLabels(){let c={};return Object.entries(r.getAddonsShortcuts()).forEach(([n,{label:u}])=>{c[n]=u}),c},getAddonsShortcutDefaults(){let c={};return Object.entries(r.getAddonsShortcuts()).forEach(([n,{defaultShortcut:u}])=>{c[n]=u}),c},async setShortcuts(c){return await t.setState({shortcuts:c},{persistence:"permanent"}),c},async restoreAllDefaultShortcuts(){return r.setShortcuts(r.getDefaultShortcuts())},async setShortcut(c,n){let u=r.getShortcutKeys();return await r.setShortcuts({...u,[c]:n}),n},async setAddonShortcut(c,n){let u=r.getShortcutKeys();return await r.setShortcuts({...u,[`${c}-${n.actionName}`]:n.defaultShortcut}),ct[`${c}-${n.actionName}`]=n,n},async restoreDefaultShortcut(c){let n=r.getDefaultShortcuts()[c];return r.setShortcut(c,n)},handleKeydownEvent(c){let n=ht(c),u=r.getShortcutKeys(),o=ut(u).find(i=>At(n,u[i]));o&&(c?.preventDefault&&c.preventDefault(),r.handleShortcutFeature(o))},handleShortcutFeature(c){let{layout:{isFullscreen:n,showNav:u,showPanel:s},ui:{enableShortcuts:o}}=t.getState();if(!!o)switch(c){case"escape":{n?e.toggleFullscreen():u||e.toggleNav();break}case"focusNav":{n&&e.toggleFullscreen(),u||e.toggleNav(),e.focusOnUIElement(F.storyListMenu);break}case"search":{n&&e.toggleFullscreen(),u||e.toggleNav(),setTimeout(()=>{e.focusOnUIElement(F.storySearchField,!0)},0);break}case"focusIframe":{let i=Ft.getElementById("storybook-preview-iframe");if(i)try{i.contentWindow.focus()}catch{}break}case"focusPanel":{n&&e.toggleFullscreen(),s||e.togglePanel(),e.focusOnUIElement(F.storyPanelRoot);break}case"nextStory":{e.jumpToStory(1);break}case"prevStory":{e.jumpToStory(-1);break}case"nextComponent":{e.jumpToComponent(1);break}case"prevComponent":{e.jumpToComponent(-1);break}case"fullScreen":{e.toggleFullscreen();break}case"togglePanel":{n&&(e.toggleFullscreen(),e.resetLayout()),e.togglePanel();break}case"toggleNav":{n&&(e.toggleFullscreen(),e.resetLayout()),e.toggleNav();break}case"toolbar":{e.toggleToolbar();break}case"panelPosition":{n&&e.toggleFullscreen(),s||e.togglePanel(),e.togglePanelPosition();break}case"aboutPage":{e.navigate("/settings/about");break}case"shortcutsPage":{e.navigate("/settings/shortcuts");break}case"collapseAll":{e.collapseAll();break}case"expandAll":{e.expandAll();break}default:ct[c].action();break}}},{shortcuts:a=O}=t.getState(),l={shortcuts:ut(O).reduce((c,n)=>({...c,[n]:a[n]||O[n]}),O)};return{api:r,state:l,init:()=>{Ft.addEventListener("keydown",c=>{oo(c)||e.handleKeydownEvent(c)}),e.on(eo,c=>{e.handleKeydownEvent(c.event)})}}};var St={};_(St,{init:()=>So});import{NAVIGATE_URL as no,STORY_ARGS_UPDATED as so,SET_CURRENT_STORY as ao,GLOBALS_UPDATED as io,UPDATE_QUERY_PARAMS as co}from"@storybook/core-events";import{queryFromLocation as uo,buildArgsParam as Ht}from"@storybook/router";import{dequal as Gt}from"dequal";import lo from"global";var{window:dt}=lo,j=t=>{if(t==="true"||t==="1")return!0;if(t==="false"||t==="0")return!1},pt,po=({state:{location:t,path:e,viewMode:r,storyId:a},singleStory:l})=>{let{full:d,panel:c,nav:n,shortcuts:u,addonPanel:s,tabs:o,path:i,...S}=uo(t),p={isFullscreen:j(d),showNav:!l&&j(n),showPanel:j(c),panelPosition:["right","bottom"].includes(c)?c:void 0,showTabs:j(o)},y={enableShortcuts:j(u)},f=s||void 0,g=a,m=Gt(pt,S)?pt:S;return pt=m,{viewMode:r,layout:p,ui:y,selectedPanel:f,location:t,path:e,customQueryParams:m,storyId:g}},So=({store:t,navigate:e,state:r,provider:a,fullAPI:l,...d})=>{let c=(s,o={},i={})=>{let S=Object.entries(o).filter(([,y])=>y).sort(([y],[f])=>y<f?-1:1).map(([y,f])=>`${y}=${f}`),p=[s,...S].join("&");return e(p,i)},n={getQueryParam(s){let{customQueryParams:o}=t.getState();return o?o[s]:void 0},getUrlState(){let{path:s,customQueryParams:o,storyId:i,url:S,viewMode:p}=t.getState();return{path:s,queryParams:o,storyId:i,url:S,viewMode:p}},setQueryParams(s){let{customQueryParams:o}=t.getState(),i={},S={...o,...Object.entries(s).reduce((p,[y,f])=>(f!==null&&(p[y]=f),p),i)};Gt(o,S)||(t.setState({customQueryParams:S}),l.emit(co,S))},navigateUrl(s,o){e(s,{...o,plain:!0})}},u=()=>{let s=()=>{let{path:i,queryParams:S,viewMode:p}=l.getUrlState();if(p!=="story")return;let y=l.getCurrentStoryData();if(y?.type!=="story")return;let{args:f,initialArgs:g}=y,m=Ht(g,f);c(i,{...S,args:m},{replace:!0}),n.setQueryParams({args:m})};l.on(ao,()=>s());let o;l.on(so,()=>{"requestIdleCallback"in dt?(o&&dt.cancelIdleCallback(o),o=dt.requestIdleCallback(s,{timeout:1e3})):(o&&clearTimeout(o),setTimeout(s,100))}),l.on(io,({globals:i,initialGlobals:S})=>{let{path:p,queryParams:y}=l.getUrlState(),f=Ht(S,i);c(p,{...y,globals:f},{replace:!0}),n.setQueryParams({globals:f})}),l.on(no,(i,S)=>{l.navigateUrl(i,S)}),l.showReleaseNotesOnLaunch()&&e("/settings/release-notes")};return{api:n,state:po({store:t,navigate:e,state:r,provider:a,fullAPI:l,...d}),init:u}};var yt={};_(yt,{init:()=>mo});import yo from"global";import x from"semver";import fo from"memoizerific";var Vt="7.0.0-alpha.48";var{VERSIONCHECK:go}=yo,Ut=fo(1)(()=>{try{return{...JSON.parse(go).data||{}}}catch{return{}}}),mo=({store:t,mode:e,fullAPI:r})=>{let{dismissedVersionNotification:a}=t.getState(),l={versions:{current:{version:Vt},...Ut()},dismissedVersionNotification:a},d={getCurrentVersion:()=>{let{versions:{current:n}}=t.getState();return n},getLatestVersion:()=>{let{versions:{latest:n,next:u,current:s}}=t.getState();return s&&x.prerelease(s.version)&&u?n&&x.gt(n.version,u.version)?n:u:n},versionUpdateAvailable:()=>{let n=d.getLatestVersion(),u=d.getCurrentVersion();if(n){if(!n.version||!u.version)return!0;let o=!!x.prerelease(u.version)?`${x.major(u.version)}.${x.minor(u.version)}.${x.patch(u.version)}`:u.version,i=x.diff(o,n.version);return x.gt(n.version,o)&&i!=="patch"&&!i.includes("pre")}return!1}};return{init:async()=>{let{versions:n={}}=t.getState(),{latest:u,next:s}=Ut();if(await t.setState({versions:{...n,latest:u,next:s}}),d.versionUpdateAvailable()){let o=d.getLatestVersion().version,i=x.diff(n.current.version,n.latest.version);o!==a&&i!=="patch"&&!x.prerelease(o)&&e!=="production"&&r.addNotification({id:"update",link:"/settings/about",content:{headline:`Storybook ${o} is available!`,subHeadline:`Your current version is: ${n.current.version}`},icon:{name:"book"},onClear(){t.setState({dismissedVersionNotification:o},{persistence:"permanent"})}})}},state:l,api:d}};var ft={};_(ft,{init:()=>Io});import{SET_GLOBALS as Po,UPDATE_GLOBALS as ho,GLOBALS_UPDATED as Ao}from"@storybook/core-events";import{logger as $t}from"@storybook/client-logger";import{dequal as Kt}from"dequal";var Io=({store:t,fullAPI:e})=>{let r={getGlobals(){return t.getState().globals},getGlobalTypes(){return t.getState().globalTypes},updateGlobals(c){e.emit(ho,{globals:c,options:{target:"storybook-preview-iframe"}})}},a={globals:{},globalTypes:{}},l=c=>{let n=t.getState()?.globals;Kt(c,n)||t.setState({globals:c})};return{api:r,state:a,init:()=>{e.on(Ao,function({globals:n}){let{ref:u}=E(this,e);u?$t.warn("received a GLOBALS_UPDATED from a non-local ref. This is not currently supported."):l(n)}),e.on(Po,function({globals:n,globalTypes:u}){let{ref:s}=E(this,e),o=t.getState()?.globals;s?Object.keys(n).length>0&&$t.warn("received globals from a non-local ref. This is not currently supported."):t.setState({globals:n,globalTypes:u}),o&&Object.keys(o).length!==0&&!Kt(n,o)&&r.updateGlobals(o)})}}};var{ActiveTabs:Qr}=$;var q=It({api:void 0,state:G({})}),wt=(...t)=>Eo({},...t,(e,r)=>{if(Array.isArray(r))return r}),gt=class extends bo{constructor(r){super(r);this.api={};this.initModules=()=>{this.modules.forEach(r=>{"init"in r&&r.init()})};let{location:a,path:l,refId:d,viewMode:c=r.docsOptions.docsMode?"docs":"story",singleStory:n,storyId:u,docsOptions:s,navigate:o}=r,i=new M({getState:()=>this.state,setState:(m,b)=>this.setState(m,b)}),S={location:a,path:l,viewMode:c,singleStory:n,storyId:u,refId:d},p={docsOptions:s};this.state=i.getInitialState(G({...S,...p}));let y={navigate:o,store:i,provider:r.provider};this.modules=[W,J,X,$,Z,tt,et,lt,at,nt,ft,St,yt].map(m=>m.init({...S,...p,...y,state:this.state,fullAPI:this.api}));let f=G(this.state,...this.modules.map(m=>m.state)),g=Object.assign(this.api,{navigate:o},...this.modules.map(m=>m.api));this.state=f,this.api=g}static getDerivedStateFromProps(r,a){return a.path!==r.path?{...a,location:r.location,path:r.path,refId:r.refId,viewMode:r.viewMode,storyId:r.storyId}:null}shouldComponentUpdate(r,a){let l=this.state,d=this.props;return l!==a||d.path!==r.path}render(){let{children:r}=this.props,a={state:this.state,api:this.api};return k.createElement(Co,{effect:this.initModules},k.createElement(q.Provider,{value:a},k.createElement(wo,null,r)))}};gt.displayName="Manager";var Co=({children:t,effect:e})=>(k.useEffect(e,[]),t),To=t=>t;function wo({filter:t=To,children:e}){let r=Pt(q),a=Qt(e),l=Qt(t);if(typeof a.current!="function")return k.createElement(_o,null,a.current);let d=l.current(r),c=mt(()=>[...Object.entries(d).reduce((n,u)=>n.concat(u),[])],[r.state]);return mt(()=>{let n=a.current;return k.createElement(n,{...d})},c)}function Br(){let{state:t}=Pt(q);return t}function T(){let{api:t}=Pt(q);return t}function Yt(t,e){return typeof t>"u"?e:t}var Oo=(t,e=[])=>{let r=T();return vo(()=>(Object.entries(t).forEach(([a,l])=>r.on(a,l)),()=>{Object.entries(t).forEach(([a,l])=>r.off(a,l))}),e),r.emit};function Yr(t){return T().isPrepared(t)}function Wr(t,e){let a=T().getCurrentParameter(t);return Yt(a,e)}var R={};function ko(t,e){let r=T(),a=r.getAddonState(t),l=Yt(a,R[t]?R[t]:e),d=(u,s)=>{R[t]&&(R[t]=u),r.setAddonState(t,u,s)},c=mt(()=>{let u={[`${Bt}-client-${t}`]:o=>d(o),[`${H}-client-${t}`]:o=>d(o)},s={[Ro]:()=>{let o=r.getAddonState(t);o?(R[t]=o,r.emit(`${H}-manager-${t}`,o)):R[t]?(d(R[t]),r.emit(`${H}-manager-${t}`,R[t])):e!==void 0&&(d(e),R[t]=e,r.emit(`${H}-manager-${t}`,e))},[xo]:()=>{let o=r.getAddonState(t);o!==void 0&&r.emit(`${H}-manager-${t}`,o)}};return{...u,...s}},[t]),n=Oo(c);return[l,(u,s)=>{d(u,s),n(`${Bt}-manager-${t}`,u)}]}function zr(t,e){return ko(t,e)}function Xr(){let{getCurrentStoryData:t,updateStoryArgs:e,resetStoryArgs:r}=T(),a=t(),l=a.type==="story"?a.args:{},d=qt(n=>e(a,n),[a,e]),c=qt(n=>r(a,n),[a,r]);return[l,d,c]}function Jr(){let t=T();return[t.getGlobals(),t.updateGlobals]}function Zr(){return T().getGlobalTypes()}function Do(){let{getCurrentStoryData:t}=T();return t()}function tn(){let t=Do();return t?.type==="story"&&t.argTypes||{}}export{Qr as ActiveTabs,wo as Consumer,q as ManagerContext,gt as Provider,wt as combineParameters,v as merge,zr as useAddonState,tn as useArgTypes,Xr as useArgs,Oo as useChannel,Zr as useGlobalTypes,Jr as useGlobals,Wr as useParameter,ko as useSharedState,Yr as useStoryPrepared,T as useStorybookApi,Br as useStorybookState};
